-- phpMyAdmin SQL Dump
-- version 4.8.5
-- https://www.phpmyadmin.net/
--
-- Hôte : 127.0.0.1
-- Généré le :  sam. 25 mai 2019 à 15:31
-- Version du serveur :  10.1.38-MariaDB
-- Version de PHP :  7.3.2

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de données :  `quiescis`
--

-- --------------------------------------------------------

--
-- Structure de la table `appartement`
--

CREATE TABLE `appartement` (
  `idAppartement` int(10) UNSIGNED NOT NULL,
  `adresse` longtext NOT NULL,
  `superficie` int(10) UNSIGNED NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `appartement`
--

INSERT INTO `appartement` (`idAppartement`, `adresse`, `superficie`) VALUES
(6, '122 rue du général Leclerc', 120),
(5, '92 boulevard michelet', 60),
(4, '99 allée du saule', 140),
(1, '11 rue de l\'abbaye de Fontenay', 250),
(3, '2 les clairière orange', 250),
(2, '21 rue de la république', 240);

-- --------------------------------------------------------

--
-- Structure de la table `catalogue`
--

CREATE TABLE `catalogue` (
  `idCatalogue` int(10) NOT NULL,
  `datasheet` longtext NOT NULL,
  `nom` varchar(50) NOT NULL,
  `prix` int(10) UNSIGNED NOT NULL,
  `reference` int(10) UNSIGNED NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `catalogue`
--

INSERT INTO `catalogue` (`idCatalogue`, `datasheet`, `nom`, `prix`, `reference`) VALUES
(1, 'Pin Configurations\r\nGeneral Description\r\nThe DS18S20 digital thermometer provides 9-bit Celsius\r\ntemperature measurements and has an alarm function\r\nwith nonvolatile user-programmable upper and lower trigger points. The DS18S20 communicates over a 1-Wire\r\nbus that by definition requires only one data line (and\r\nground) for communication with a central microprocessor.\r\nIn addition, the DS18S20 can derive power directly from\r\nthe data line (“parasite power”), eliminating the need for\r\nan external power supply.\r\nEach DS18S20 has a unique 64-bit serial code, which\r\nallows multiple DS18S20s to function on the same 1-Wire\r\nbus. Thus, it is simple to use one microprocessor to\r\ncontrol many DS18S20s distributed over a large area.\r\nApplications that can benefit from this feature include\r\nHVAC environmental controls, temperature monitoring\r\nsystems inside buildings, equipment, or machinery, and\r\nprocess monitoring and control systems.\r\nApplications\r\n? Thermostatic Controls\r\n? Industrial Systems\r\n? Consumer Products\r\n? Thermometers\r\n? Thermally Sensitive Systems\r\nBenefits and Features\r\n? Unique 1-Wire® Interface Requires Only One Port\r\nPin for Communication\r\n? Maximize System Accuracy in Broad Range of\r\nThermal Management Applications\r\n• Measures Temperatures from -55°C to +125°C\r\n(-67°F to +257°F)\r\n• ±0.5°C Accuracy from -10°C to +85°C\r\n• 9-Bit Resolution\r\n• No External Components Required\r\n? Parasite Power Mode Requires Only 2 Pins for\r\nOperation (DQ and GND)\r\n? Simplifies Distributed Temperature-Sensing\r\nApplications with Multidrop Capability\r\n• Each Device Has a Unique 64-Bit Serial Code\r\nStored in On-Board ROM\r\n? Flexible User-Definable Nonvolatile (NV) Alarm Settings\r\nwith Alarm Search Command Identifies Devices with\r\nTemperatures Outside Programmed Limits\r\n? Available in 8-Pin SO (150 mils) and 3-Pin TO-92\r\nPackages\r\nOrdering Information appears at end of data sheet.\r\n1-Wire is a registered trademark of Maxim Integrated Products, Inc.\r\n19-5474; Rev 3; 4/15\r\nBOTTOM VIEW\r\n2\r\nN.C.\r\nN.C.\r\nVDD\r\nDQ\r\nN.C.\r\nN.C.\r\nN.C.\r\nGND\r\nDS18S20\r\nSO (150 mils)\r\n(DS18S20Z)\r\n+ 1\r\n4\r\n3\r\n7\r\n8\r\n5\r\n6\r\nDS18S20\r\n1 2 3\r\nGND DQ VDD\r\n1\r\n1 2 3\r\nTOP VIEW\r\nTO-92\r\n(DS18S20)\r\nDS18S20 High-Precision 1-Wire Digital Thermometer \r\nVoltage Range on Any Pin Relative to Ground....-0.5V to +6.0V\r\nContinuous Power Dissipation (TA = +70°C)\r\n8-Pin SO (derate 5.9mW/°C above +70°C)..............470.6mW\r\n3-Pin TO-92 (derate 6.3mW/°C above +70°C)............500mW\r\nOperating Temperature Range......................... -55°C to +125°C\r\nStorage Temperature Range............................ -55°C to +125°C\r\nLead Temperature (soldering, 10s) .................................+260°C\r\nSoldering Temperature (reflow)\r\nLead(Pb)-free...............................................................+260°C\r\nContaining lead(Pb).....................................................+240°C\r\nNote 1: All voltages are referenced to ground.\r\nNote 2: The Pullup Supply Voltage specification assumes that the pullup device is ideal, and therefore the high level of the pullup is equal to VPU. In order to meet the VIH spec of the DS18S20, the actual supply rail for the strong pullup transistor\r\nmust include margin for the voltage drop across the transistor when it is turned on; thus: VPU_ACTUAL = VPU_IDEAL +\r\nVTRANSISTOR.\r\nNote 3: See typical performance curve in Figure 1.\r\nNote 4: Logic-low voltages are specified at a sink current of 4mA.\r\nNote 5: To guarantee a presence pulse under low voltage parasite power conditions, VILMAX may have to be reduced to as\r\nlow as 0.5V.\r\nNote 6: Logic-high voltages are specified at a source current of 1mA.\r\nNote 7: Standby current specified up to +70°C. Standby current typically is 3µA at +125°C.\r\nNote 8: To minimize IDDS, DQ should be within the following ranges: GND ? DQ ? GND + 0.3V or VDD – 0.3V ? DQ ? VDD.\r\nNote 9: Active current refers to supply current during active temperature conversions or EEPROM writes.\r\nNote 10: DQ line is high (“high-Z” state).\r\nNote 11: Drift data is based on a 1000-hour stress test at +125°C with VDD = 5.5V.\r\n(VDD = 3.0V to 5.5V, TA = -55°C to +125°C, unless otherwise noted.)\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nSupply Voltage VDD Local Power (Note 1) +3.0 +5.5 V\r\nPullup Supply Voltage VPU\r\nParasite Power\r\n(Note 1, 2)\r\n+3.0 +5.5\r\nV\r\nLocal Power +3.0 VDD\r\nThermometer Error tERR\r\n-10°C to +85°C\r\n(Note 3)\r\n±0.5\r\n°C\r\n-55°C to +125°C ±2\r\nInput Logic-Low VIL (Note 1, 4, 5) -0.3 +0.8 V\r\nInput Logic-High VIH\r\nLocal Power\r\n(Note 1, 6)\r\n+2.2 The lower of\r\n5.5 or VDD\r\n+ 0.3\r\nV\r\nParasite Power +3.0\r\nSink Current IL VI/O = 0.4V (Note 1) 4.0 mA\r\nStandby Current IDDS (Note 7, 8) 750 1000 nA\r\nActive Current IDD VDD = 5V (Note 9) 1 1.5 mA\r\nDQ Input Current IDQ (Note 10) 5 µA\r\nDrift (Note 11) ±0.2 °C\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 2\r\nAbsolute Maximum Ratings\r\nThese are stress ratings only and functional operation of the device at these or any other conditions above those indicated in the operation sections of this specification is not implied. Exposure\r\nto absolute maximum rating conditions for extended periods of time may affect reliability.\r\nDC Electrical Characteristics\r\n(VDD = 3.0V to 5.5V, TA = -55°C to +100°C, unless otherwise noted.)\r\n(VDD = 3.0V to 5.5V; TA = -55°C to +125°C, unless otherwise noted.)\r\nNote 12: See the timing diagrams in Figure 2.\r\nNote 13: Under parasite power, if tRSTL > 960µs, a power-on reset may occur.\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nNV Write Cycle Time tWR 2 10 ms\r\nEEPROM Writes NEEWR -55°C to +55°C 50k writes\r\nEEPROM Data Retention tEEDR -55°C to +55°C 10 years\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nTemperature Conversion Time tCONV (Note 12) 750 ms\r\nTime to Strong Pullup On tSPON Start Convert T Command Issued 10 µs\r\nTime Slot tSLOT (Note 12) 60 120 µs\r\nRecovery Time tREC (Note 12) 1 µs\r\nWrite 0 Low Time tLOW0 (Note 12) 60 120 µs\r\nWrite 1 Low Time tLOW1 (Note 12) 1 15 µs\r\nRead Data Valid tRDV (Note 12) 15 µs\r\nReset Time High tRSTH (Note 12) 480 µs\r\nReset Time Low tRSTL (Note 12, 13) 480 µs\r\nPresence-Detect High tPDHIGH (Note 12) 15 60 µs\r\nPresence-Detect Low tPDLOW (Note 12) 60 240 µs\r\nCapacitance CIN/OUT 25 pF\r\nFigure 1. Typical Performance Curve\r\nDS18S20 TYPICAL ERROR CURVE\r\n0.5\r\n0.4\r\n0.3\r\n0.2\r\n0.1\r\n0\r\n-0.1\r\n-0.2\r\n-0.3\r\n-0.4\r\n-0.5\r\nTHERMOMETER ERROR (°C)\r\n0 10 20 30 40 50 60 70\r\nTEMPERATURE (°C)\r\n+3s ERROR\r\nMEAN ERROR\r\n-3s ERROR\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 3\r\nAC Electrical Characteristics—NV Memory\r\nAC Electrical Characteristics\r\nPIN\r\nNAME FUNCTION\r\nTO-92 SO\r\n1 5 GND Ground\r\n2 4 DQ Data Input/Output. Open-drain 1-Wire interface pin. Also provides power to the\r\ndevice when used in parasite power mode (see the Powering the DS18S20 section.)\r\n3 3 VDD Optional VDD. VDD must be grounded for operation in parasite power mode.\r\n— 1, 2, 6, 7, 8 N.C. No Connection\r\nFigure 2. Timing Diagrams\r\nSTART OF NEXT CYCLE\r\n1-Wire WRITE ZERO TIME SLOT\r\ntREC\r\ntSLOT\r\ntLOW0\r\n1-Wire READ ZERO TIME SLOT\r\ntREC\r\ntSLOT START OF NEXT CYCLE\r\ntRDV\r\n1-Wire RESET PULSE\r\n1-Wire PRESENCE DETECT\r\ntRSTL tRSTH\r\ntPDHIGH\r\nPRESENCE DETECT\r\ntPDLOW\r\nRESET PULSE FROM HOST\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 4\r\nPin Description\r\nOverview\r\nFigure 3 shows a block diagram of the DS18S20, and\r\npin descriptions are given in the Pin Description table.\r\nThe 64-bit ROM stores the device’s unique serial code.\r\nThe scratchpad memory contains the 2-byte temperature\r\nregister that stores the digital output from the temperature\r\nsensor. In addition, the scratchpad provides access to the\r\n1-byte upper and lower alarm trigger registers (TH and\r\nTL). The TH and TL registers are nonvolatile (EEPROM),\r\nso they will retain data when the device is powered down.\r\nThe DS18S20 uses Maxim’s exclusive 1-Wire bus protocol that implements bus communication using one control\r\nsignal. The control line requires a weak pullup resistor\r\nsince all devices are linked to the bus via a 3-state or\r\nopen-drain port (the DQ pin in the case of the DS18S20).\r\nIn this bus system, the microprocessor (the master\r\ndevice) identifies and addresses devices on the bus\r\nusing each device’s unique 64-bit code. Because each\r\ndevice has a unique code, the number of devices that\r\ncan be addressed on one bus is virtually unlimited. The\r\n1-Wire bus protocol, including detailed explanations of the\r\ncommands and “time slots,” is covered in the 1-Wire Bus\r\nSystem section.\r\nAnother feature of the DS18S20 is the ability to operate\r\nwithout an external power supply. Power is instead supplied through the 1-Wire pullup resistor via the DQ pin\r\nwhen the bus is high. The high bus signal also charges an\r\ninternal capacitor (CPP), which then supplies power to the\r\ndevice when the bus is low. This method of deriving power\r\nfrom the 1-Wire bus is referred to as “parasite power.” As\r\nan alternative, the DS18S20 may also be powered by an\r\nexternal supply on VDD.\r\nOperation—Measuring Temperature\r\nThe core functionality of the DS18S20 is its direct-to-digital temperature sensor. The temperature sensor output\r\nhas 9-bit resolution, which corresponds to 0.5°C steps.\r\nThe DS18S20 powers-up in a low-power idle state; to\r\ninitiate a temperature measurement and A-to-D conversion, the master must issue a Convert T [44h] command.\r\nFollowing the conversion, the resulting thermal data is\r\nstored in the 2-byte temperature register in the scratchpad memory and the DS18S20 returns to its idle state.\r\nIf the DS18S20 is powered by an external supply, the\r\nmaster can issue “read-time slots” (see the 1-Wire Bus\r\nSystem section) after the Convert T command and the\r\nDS18S20 will respond by transmitting 0 while the temperature conversion is in progress and 1 when the conversion is done. If the DS18S20 is powered with parasite\r\npower, this notification technique cannot be used since\r\nthe bus must be pulled high by a strong pullup during the\r\nentire temperature conversion. The bus requirements for\r\nparasite power are explained in detail in the Powering The\r\nDS18S20 section.\r\nFigure 3. DS18S20 Block Diagram\r\nVPU\r\n64-BIT ROM\r\nAND\r\n1-Wire PORT\r\nDQ\r\nVDD\r\nINTERNAL VDD\r\nCPP\r\nPARASITE POWER CIRCUIT MEMORY\r\nCONTROL LOGIC\r\nSCRATCHPAD\r\n8-BIT CRC\r\nGENERATOR\r\nTEMPERATURE\r\nSENSOR\r\nALARM HIGH TRIGGER (TH)\r\nREGISTER (EEPROM)\r\nALARM LOW TRIGGER (TL)\r\nREGISTER (EEPROM)\r\nGND\r\nDS18S20 4.7k?\r\nPOWERSUPPLY SENSE\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 5\r\nThe DS18S20 output data is calibrated in degrees centigrade; for Fahrenheit applications, a lookup table or\r\nconversion routine must be used. The temperature data is\r\nstored as a 16-bit sign-extended two’s complement number in the temperature register (see Figure 4). The sign\r\nbits (S) indicate if the temperature is positive or negative:\r\nfor positive numbers S = 0 and for negative numbers S =\r\n1. Table 1 gives examples of digital output data and the\r\ncorresponding temperature reading.\r\nResolutions greater than 9 bits can be calculated using the\r\ndata from the temperature, COUNT REMAIN and COUNT\r\nPER °C registers in the scratchpad. Note that the COUNT\r\nPER °C register is hard-wired to 16 (10h). After reading\r\nthe scratchpad, the TEMP_READ value is obtained by\r\ntruncating the 0.5°C bit (bit 0) from the temperature data\r\n(see Figure 4). The extended resolution temperature can\r\nthen be calculated using the following equation:\r\nTEMPERATURE TEMP_READ 0.25\r\nCOUNT_PER_C COUNT_REMAIN\r\nCOUNT_PER_C\r\n= ?\r\n? +\r\nOperation—Alarm Signaling\r\nAfter the DS18S20 performs a temperature conversion,\r\nthe temperature value is compared to the user-defined\r\ntwo’s complement alarm trigger values stored in the\r\n1-byte TH and TL registers (see Figure 5). The sign bit (S)\r\nindicates if the value is positive or negative: for positive\r\nnumbers S = 0 and for negative numbers S = 1. The TH\r\nand TL registers are nonvolatile (EEPROM) so they will\r\nretain data when the device is powered down. TH and TL\r\ncan be accessed through bytes 2 and 3 of the scratchpad\r\nas explained in the Memory section.\r\nOnly bits 8 through 1 of the temperature register are used\r\nin the TH and TL comparison since TH and TL are 8-bit\r\nregisters. If the measured temperature is lower than or\r\nequal to TL or higher than TH, an alarm condition exists\r\nand an alarm flag is set inside the DS18S20. This flag is\r\nupdated after every temperature measurement; therefore,\r\nif the alarm condition goes away, the flag will be turned off\r\nafter the next temperature conversion.\r\nTable 1. Temperature/Data Relationship\r\n*The power-on reset value of the temperature register is +85°C.\r\nTEMPERATURE (°C) DIGITAL OUTPUT (BINARY) DIGITAL OUTPUT (HEX)\r\n+85.0* 0000 0000 1010 1010 00AAh\r\n+25.0 0000 0000 0011 0010 0032h\r\n+0.5 0000 0000 0000 0001 0001h\r\n0 0000 0000 0000 0000 0000h\r\n-0.5 1111 1111 1111 1111 FFFFh\r\n-25.0 1111 1111 1100 1110 FFCEh\r\n-55.0 1111 1111 1001 0010 FF92h\r\nFigure 4. Temperature Register Format\r\nFigure 5. TH and TL Register Format\r\nBIT 7 BIT 6 BIT 5 BIT 4 BIT 3 BIT 2 BIT 1 BIT 0\r\nLS BYTE 26 25 24 23 22 21 20 2-1\r\nBIT 15 BIT 14 BIT 13 BIT 12 BIT 11 BIT 10 BIT 9 BIT 8\r\nMS BYTE S S S S S S S S\r\nS = SIGN\r\nBIT 7 BIT 6 BIT 5 BIT 4 BIT 3 BIT 2 BIT 1 BIT 0\r\nS 26 25 25 25 22 21 20\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 6\r\nThe master device can check the alarm flag status of\r\nall DS18S20s on the bus by issuing an Alarm Search\r\n[ECh] command. Any DS18S20s with a set alarm flag will\r\nrespond to the command, so the master can determine\r\nexactly which DS18S20s have experienced an alarm\r\ncondition. If an alarm condition exists and the TH or TL\r\nsettings have changed, another temperature conversion\r\nshould be done to validate the alarm condition.\r\nPowering The DS18S20\r\nThe DS18S20 can be powered by an external supply on\r\nthe VDD pin, or it can operate in “parasite power” mode,\r\nwhich allows the DS18S20 to function without a local\r\nexternal supply. Parasite power is very useful for applications that require remote temperature sensing or those\r\nwith space constraints. Figure 3 shows the DS18S20’s\r\nparasite-power control circuitry, which “steals” power from\r\nthe 1-Wire bus via the DQ pin when the bus is high. The\r\nstolen charge powers the DS18S20 while the bus is high,\r\nand some of the charge is stored on the parasite power\r\ncapacitor (CPP) to provide power when the bus is low.\r\nWhen the DS18S20 is used in parasite power mode, the\r\nVDD pin must be connected to ground.\r\nIn parasite power mode, the 1-Wire bus and CPP can\r\nprovide sufficient current to the DS18S20 for most operations as long as the specified timing and voltage requirements are met (see the DC Electrical Characteristics\r\nand the AC Electrical Characteristics). However, when\r\nthe DS18S20 is performing temperature conversions or\r\ncopying data from the scratchpad memory to EEPROM,\r\nthe operating current can be as high as 1.5mA. This\r\ncurrent can cause an unacceptable voltage drop across\r\nthe weak 1-Wire pullup resistor and is more current than\r\ncan be supplied by CPP. To assure that the DS18S20\r\nhas sufficient supply current, it is necessary to provide a\r\nstrong pullup on the 1-Wire bus whenever temperature\r\nconversions are taking place or data is being copied from\r\nthe scratchpad to EEPROM. This can be accomplished\r\nby using a MOSFET to pull the bus directly to the rail\r\nas shown in Figure 6. The 1-Wire bus must be switched\r\nto the strong pullup within 10µs (max) after a Convert T\r\n[44h] or Copy Scratchpad [48h] command is issued, and\r\nthe bus must be held high by the pullup for the duration\r\nof the conversion (tCONV) or data transfer (tWR = 10ms).\r\nNo other activity can take place on the 1-Wire bus while\r\nthe pullup is enabled.\r\nThe DS18S20 can also be powered by the conventional\r\nmethod of connecting an external power supply to the\r\nVDD pin, as shown in Figure 7. The advantage of this\r\nmethod is that the MOSFET pullup is not required, and\r\nthe 1-Wire bus is free to carry other traffic during the temperature conversion time.\r\nThe use of parasite power is not recommended for temperatures above 100°C since the DS18S20 may not be\r\nable to sustain communications due to the higher leakage currents that can exist at these temperatures. For\r\napplications in which such temperatures are likely, it is\r\nstrongly recommended that the DS18S20 be powered by\r\nan external power supply.\r\nIn some situations the bus master may not know whether\r\nthe DS18S20s on the bus are parasite powered or powered by external supplies. The master needs this information to determine if the strong bus pullup should be used\r\nduring temperature conversions. To get this information,\r\nthe master can issue a Skip ROM [CCh] command followed by a Read Power Supply [B4h] command followed\r\nby a “read-time slot”. During the read-time slot, parasite\r\npowered DS18S20s will pull the bus low, and externally\r\npowered DS18S20s will let the bus remain high. If the\r\nbus is pulled low, the master knows that it must supply\r\nthe strong pullup on the 1-Wire bus during temperature\r\nconversions.\r\nFigure 6. Supplying the Parasite-Powered DS18S20 During\r\nTemperature Conversions\r\nFigure 7. Powering the DS18S20 with an External Supply\r\nVPU\r\n4.7k?\r\nVPU\r\n1-Wire BUS\r\nDS18S20\r\nGND DQ VDD\r\nTO OTHER\r\n1-Wire DEVICES\r\nµP\r\nVDD\r\n(EXTERNAL SUPPLY)\r\nVPU\r\n4.7k?\r\n1-Wire BUS\r\nDS18S20\r\nGND DQ VDD\r\nTO OTHER\r\n1-Wire DEVICES\r\nµP\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 7\r\n64-Bit Lasered ROM Code\r\nEach DS18S20 contains a unique 64-bit code (see\r\nFigure 8) stored in ROM. The least significant 8 bits of the\r\nROM code contain the DS18S20’s 1-Wire family code:\r\n10h. The next 48 bits contain a unique serial number.\r\nThe most significant 8 bits contain a cyclic redundancy\r\ncheck (CRC) byte that is calculated from the first 56 bits\r\nof the ROM code. A detailed explanation of the CRC bits\r\nis provided in the CRC Generation section. The 64-bit\r\nROM code and associated ROM function control logic\r\nallow the DS18S20 to operate as a 1-Wire device using\r\nthe protocol detailed in the 1-Wire Bus System section.\r\nMemory\r\nThe DS18S20’s memory is organized as shown in\r\nFigure 9. The memory consists of an SRAM scratchpad with nonvolatile EEPROM storage for the high and\r\nlow alarm trigger registers (TH and TL). Note that if the\r\nDS18S20 alarm function is not used, the TH and TL registers can serve as general-purpose memory. All memory commands are described in detail in the DS18S20\r\nFunction Commands section.\r\nByte 0 and byte 1 of the scratchpad contain the LSB and\r\nthe MSB of the temperature register, respectively. These\r\nbytes are read-only. Bytes 2 and 3 provide access to TH\r\nand TL registers. Bytes 4 and 5 are reserved for internal\r\nuse by the device and cannot be overwritten; these bytes\r\nwill return all 1s when read. Bytes 6 and 7 contain the\r\nCOUNT REMAIN and COUNT PER ºC registers, which\r\ncan be used to calculate extended resolution results as\r\nexplained in the Operation—Measuring Temperature\r\nsection.\r\nByte 8 of the scratchpad is read-only and contains the\r\nCRC code for bytes 0 through 7 of the scratchpad.\r\nThe DS18S20 generates this CRC using the method\r\ndescribed in the CRC Generation section.\r\nData is written to bytes 2 and 3 of the scratchpad using\r\nthe Write Scratchpad [4Eh] command; the data must be\r\ntransmitted to the DS18S20 starting with the least significant bit of byte 2. To verify data integrity, the scratchpad\r\ncan be read (using the Read Scratchpad [BEh] command)\r\nafter the data is written. When reading the scratchpad,\r\ndata is transferred over the 1-Wire bus starting with the\r\nleast significant bit of byte 0. To transfer the TH and TL\r\ndata from the scratchpad to EEPROM, the master must\r\nissue the Copy Scratchpad [48h] command.\r\nFigure 8. 64-Bit Lasered ROM Code\r\nFigure 9. DS18S20 Memory Map\r\n8-BIT CRC 48-BIT SERIAL NUMBER 8-BIT FAMILY CODE (10h)\r\nMSB LSB MSB LSB MSB LSB\r\nBYTE 0\r\nBYTE 1\r\nTEMPERATURE LSB (AAh)\r\nTEMPERATURE MSB (00h) (85°C)\r\nBYTE 2\r\nBYTE 3\r\nTH REGISTER OR USER BYTE 1*\r\nTL REGISTER OR USER BYTE 2*\r\nBYTE 4\r\nBYTE 5\r\nRESERVED (FFh)\r\nRESERVED (FFh)\r\nBYTE 6\r\nBYTE 7\r\nCOUNT REMAIN (0Ch)\r\nCOUNT PER °C (10h)\r\nBYTE 8 CRC*\r\n*POWER-UP STATE DEPENDS ON VALUE(S) STORED IN EEPROM.\r\nTH REGISTER OR USER BYTE 1\r\nTL REGISTER OR USER BYTE 2\r\nSCRATCHPAD\r\n(POWER-UP STATE)\r\nEEPROM\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 8\r\nData in the EEPROM registers is retained when the\r\ndevice is powered down; at power-up the EEPROM data\r\nis reloaded into the corresponding scratchpad locations.\r\nData can also be reloaded from EEPROM to the scratchpad at any time using the Recall E2 [B8h] command.\r\nThe master can issue “read-time slots” (see the 1-Wire\r\nBus System section) following the Recall E2 command\r\nand the DS18S20 will indicate the status of the recall by\r\ntransmitting 0 while the recall is in progress and 1 when\r\nthe recall is done.\r\nCRC Generation\r\nCRC bytes are provided as part of the DS18S20’s 64-bit\r\nROM code and in the 9th byte of the scratchpad memory.\r\nThe ROM code CRC is calculated from the first 56 bits\r\nof the ROM code and is contained in the most significant\r\nbyte of the ROM. The scratchpad CRC is calculated from\r\nthe data stored in the scratchpad, and therefore it changes when the data in the scratchpad changes. The CRCs\r\nprovide the bus master with a method of data validation\r\nwhen data is read from the DS18S20. To verify that data\r\nhas been read correctly, the bus master must re-calculate\r\nthe CRC from the received data and then compare this\r\nvalue to either the ROM code CRC (for ROM reads) or\r\nto the scratchpad CRC (for scratchpad reads). If the calculated CRC matches the read CRC, the data has been\r\nreceived error free. The comparison of CRC values and\r\nthe decision to continue with an operation are determined\r\nentirely by the bus master. There is no circuitry inside the\r\nDS18S20 that prevents a command sequence from proceeding if the DS18S20 CRC (ROM or scratchpad) does\r\nnot match the value generated by the bus master.\r\nThe equivalent polynomial function of the CRC (ROM or\r\nscratchpad) is:\r\nCRC = X8 + X5 + X4 + 1\r\nThe bus master can re-calculate the CRC and compare it\r\nto the CRC values from the DS18S20 using the polynomial generator shown in Figure 10. This circuit consists\r\nof a shift register and XOR gates, and the shift register\r\nbits are initialized to 0. Starting with the least significant\r\nbit of the ROM code or the least significant bit of byte 0\r\nin the scratchpad, one bit at a time should shifted into the\r\nshift register. After shifting in the 56th bit from the ROM or\r\nthe most significant bit of byte 7 from the scratchpad, the\r\npolynomial generator will contain the re-calculated CRC.\r\nNext, the 8-bit ROM code or scratchpad CRC from the\r\nDS18S20 must be shifted into the circuit. At this point, if\r\nthe re-calculated CRC was correct, the shift register will\r\ncontain all 0s. Additional information about the Maxim\r\n1-Wire cyclic redundancy check is available in Application\r\nNote 27: Understanding and Using Cyclic Redundancy\r\nChecks with Maxim ?Button Products.\r\n1-Wire Bus System\r\nThe 1-Wire bus system uses a single bus master to control one or more slave devices. The DS18S20 is always a\r\nslave. When there is only one slave on the bus, the system is referred to as a “single-drop” system; the system is\r\n“multidrop” if there are multiple slaves on the bus.\r\nAll data and commands are transmitted least significant\r\nbit first over the 1-Wire bus.\r\nThe following discussion of the 1-Wire bus system is\r\nbroken down into three topics: hardware configuration,\r\ntransaction sequence, and 1-Wire signaling (signal types\r\nand timing).\r\nFigure 10. CRC Generator\r\n(MSB) (LSB)\r\nXOR XOR XOR\r\nINPUT\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 9\r\nHardware Configuration\r\nThe 1-Wire bus has by definition only a single data line.\r\nEach device (master or slave) interfaces to the data line via\r\nan open drain or 3-state port. This allows each device to\r\n“release” the data line when the device is not transmitting\r\ndata so the bus is available for use by another device. The\r\n1-Wire port of the DS18S20 (the DQ pin) is open drain with\r\nan internal circuit equivalent to that shown in Figure 11.\r\nThe 1-Wire bus requires an external pullup resistor of\r\napproximately 5k?; thus, the idle state for the 1-Wire\r\nbus is high. If for any reason a transaction needs to be\r\nsuspended, the bus MUST be left in the idle state if the\r\ntransaction is to resume. Infinite recovery time can occur\r\nbetween bits so long as the 1-Wire bus is in the inactive\r\n(high) state during the recovery period. If the bus is held\r\nlow for more than 480µs, all components on the bus will\r\nbe reset.\r\nTransaction Sequence\r\nThe transaction sequence for accessing the DS18S20 is\r\nas follows:\r\nStep 1. Initialization\r\nStep 2. ROM Command (followed by any required data\r\nexchange)\r\nStep 3. DS18S20 Function Command (followed by any\r\nrequired data exchange)\r\nIt is very important to follow this sequence every time the\r\nDS18S20 is accessed, as the DS18S20 will not respond\r\nif any steps in the sequence are missing or out of order.\r\nExceptions to this rule are the Search ROM [F0h] and\r\nAlarm Search [ECh] commands. After issuing either of\r\nthese ROM commands, the master must return to Step 1\r\nin the sequence.\r\nInitialization\r\nAll transactions on the 1-Wire bus begin with an initialization sequence. The initialization sequence consists of a\r\nreset pulse transmitted by the bus master followed by\r\npresence pulse(s) transmitted by the slave(s). The presence pulse lets the bus master know that slave devices\r\n(such as the DS18S20) are on the bus and are ready\r\nto operate. Timing for the reset and presence pulses is\r\ndetailed in the 1-Wire Signaling section.\r\nROM Commands\r\nAfter the bus master has detected a presence pulse, it\r\ncan issue a ROM command. These commands operate\r\non the unique 64-bit ROM codes of each slave device and\r\nallow the master to single out a specific device if many\r\nare present on the 1-Wire bus. These commands also\r\nallow the master to determine how many and what types\r\nof devices are present on the bus or if any device has\r\nexperienced an alarm condition. There are five ROM commands, and each command is 8 bits long. The master\r\ndevice must issue an appropriate ROM command before\r\nissuing a DS18S20 function command. A flowchart for\r\noperation of the ROM commands is shown in Figure 16.\r\nSearch Rom [F0h]\r\nWhen a system is initially powered up, the master must\r\nidentify the ROM codes of all slave devices on the bus,\r\nwhich allows the master to determine the number of\r\nslaves and their device types. The master learns the ROM\r\ncodes through a process of elimination that requires the\r\nmaster to perform a Search ROM cycle (i.e., Search ROM\r\ncommand followed by data exchange) as many times as\r\nnecessary to identify all of the slave devices. If there is\r\nonly one slave on the bus, the simpler Read ROM command (see below) can be used in place of the Search\r\nROM process. For a detailed explanation of the Search\r\nROM procedure, refer to the ?Button® Book of Standards\r\nat www.maximintegrated.com/ibuttonbook. After every\r\nSearch ROM cycle, the bus master must return to Step 1\r\n(Initialization) in the transaction sequence.\r\nRead ROM [33h]\r\nThis command can only be used when there is one slave\r\non the bus. It allows the bus master to read the slave’s\r\n64-bit ROM code without using the Search ROM procedure. If this command is used when there is more than\r\none slave present on the bus, a data collision will occur\r\nwhen all the slaves attempt to respond at the same time.\r\n?Button is a registered trademark of Maxim Integrated Products, Inc.\r\nFigure 11. Hardware Configuration\r\nDQ\r\nVPU\r\n4.7k? DS18S20\r\n1-Wire PORT\r\nRx\r\nTx\r\n100?\r\nMOSFET\r\n5µA\r\nTYP\r\nRx 1-Wire BUS\r\nTx\r\nRx = RECEIVE\r\nTx = TRANSMIT\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 10\r\nNote 1: For parasite-powered DS18S20s, the master must enable a strong pullup on the 1-Wire bus during temperature conversions and copies from the scratchpad to EEPROM. No other bus activity may take place during this time.\r\nNote 2: The master can interrupt the transmission of data at any time by issuing a reset.\r\nNote 3: Both bytes must be written before a reset is issued.\r\nMatch ROM [55h]\r\nThe match ROM command followed by a 64-bit ROM\r\ncode sequence allows the bus master to address a\r\nspecific slave device on a multidrop or single-drop bus.\r\nOnly the slave that exactly matches the 64-bit ROM code\r\nsequence will respond to the function command issued\r\nby the master; all other slaves on the bus will wait for a\r\nreset pulse.\r\nSkip ROM [CCh]\r\nThe master can use this command to address all devices\r\non the bus simultaneously without sending out any ROM\r\ncode information. For example, the master can make all\r\nDS18S20s on the bus perform simultaneous temperature\r\nconversions by issuing a Skip ROM command followed by\r\na Convert T [44h] command.\r\nNote that the Read Scratchpad [BEh] command can follow the Skip ROM command only if there is a single slave\r\ndevice on the bus. In this case, time is saved by allowing\r\nthe master to read from the slave without sending the\r\ndevice’s 64-bit ROM code. A Skip ROM command followed\r\nby a Read Scratchpad command will cause a data collision\r\non the bus if there is more than one slave since multiple\r\ndevices will attempt to transmit data simultaneously.\r\nAlarm Search [ECh]\r\nThe operation of this command is identical to the operation\r\nof the Search ROM command except that only slaves with\r\na set alarm flag will respond. This command allows the\r\nmaster device to determine if any DS18S20s experienced\r\nan alarm condition during the most recent temperature\r\nconversion. After every Alarm Search cycle (i.e., Alarm\r\nSearch command followed by data exchange), the bus\r\nmaster must return to Step 1 (Initialization) in the transaction sequence. See the Operation—Alarm Signaling section for an explanation of alarm flag operation.\r\nDS18S20 Function Commands\r\nAfter the bus master has used a ROM command to\r\naddress the DS18S20 with which it wishes to communicate, the master can issue one of the DS18S20 function\r\ncommands. These commands allow the master to write\r\nto and read from the DS18S20’s scratchpad memory,\r\ninitiate temperature conversions and determine the power\r\nsupply mode. The DS18S20 function commands, which\r\nare described below, are summarized in Table 2 and illustrated by the flowchart in Figure 17.\r\nTable 2. DS18S20 Function Command Set\r\nCOMMAND DESCRIPTION PROTOCOL 1-Wire BUS ACTIVITY AFTER\r\nCOMMAND IS ISSUED NOTES\r\nTEMPERATURE CONVERSION COMMANDS\r\nConvert T Initiates temperature\r\nconversion. 44h\r\nDS18S20 transmits conversion status\r\nto master (not applicable for parasitepowered DS18S20s).\r\n1\r\nMEMORY COMMANDS\r\nRead Scratchpad Reads the entire scratchpad\r\nincluding the CRC byte. BEh DS18S20 transmits up to 9 data\r\nbytes to master. 2\r\nWrite Scratchpad Writes data into scratchpad\r\nbytes 2 and 3 (TH and TL). 4Eh Master transmits 2 data bytes to\r\nDS18S20. 3\r\nCopy Scratchpad Copies TH and TL data from the\r\nscratchpad to EEPROM. 48h None 1\r\nRecall E2 Recalls TH and TL data from\r\nEEPROM to the scratchpad. B8h DS18S20 transmits recall status to\r\nmaster.\r\nRead Power\r\nSupply\r\nSignals DS18S20 power supply\r\nmode to the master. B4h DS18S20 transmits supply status to\r\nmaster.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 11\r\nConvert T [44h]\r\nThis command initiates a single temperature conversion.\r\nFollowing the conversion, the resulting thermal data is\r\nstored in the 2-byte temperature register in the scratchpad memory and the DS18S20 returns to its low-power\r\nidle state. If the device is being used in parasite power\r\nmode, within 10µs (max) after this command is issued the\r\nmaster must enable a strong pullup on the 1-Wire bus for\r\nthe duration of the conversion (tCONV) as described in the\r\nPowering The DS18S20 section. If the DS18S20 is powered by an external supply, the master can issue readtime slots after the Convert T command and the DS18S20\r\nwill respond by transmitting 0 while the temperature conversion is in progress and 1 when the conversion is done.\r\nIn parasite power mode this notification technique cannot\r\nbe used since the bus is pulled high by the strong pullup\r\nduring the conversion.\r\nWrite Scratchpad [4Eh]\r\nThis command allows the master to write 2 bytes of data\r\nto the DS18S20’s scratchpad. The first byte is written into\r\nthe TH register (byte 2 of the scratchpad), and the second\r\nbyte is written into the TL register (byte 3 of the scratchpad). Data must be transmitted least significant bit first.\r\nBoth bytes MUST be written before the master issues a\r\nreset, or the data may be corrupted.\r\nRead Scratchpad [BEh]\r\nThis command allows the master to read the contents of\r\nthe scratchpad. The data transfer starts with the least significant bit of byte 0 and continues through the scratchpad\r\nuntil the 9th byte (byte 8 – CRC) is read. The master may\r\nissue a reset to terminate reading at any time if only part\r\nof the scratchpad data is needed.\r\nCopy Scratchpad [48h]\r\nThis command copies the contents of the scratchpad TH\r\nand TL registers (bytes 2 and 3) to EEPROM. If the device\r\nis being used in parasite power mode, within 10µs (max)\r\nafter this command is issued the master must enable\r\na strong pullup on the 1-Wire bus for at least 10ms as\r\ndescribed in the Powering The DS18S20 section.\r\nRecall E2 [B8h]\r\nThis command recalls the alarm trigger values (TH and\r\nTL) from EEPROM and places the data in bytes 2 and\r\n3, respectively, in the scratchpad memory. The master\r\ndevice can issue read-time slots following the Recall E2\r\ncommand and the DS18S20 will indicate the status of the\r\nrecall by transmitting 0 while the recall is in progress and\r\n1 when the recall is done. The recall operation happens\r\nautomatically at power-up, so valid data is available in\r\nthe scratchpad as soon as power is applied to the device.\r\nRead Power Supply [B4h]\r\nThe master device issues this command followed by a\r\nread-time slot to determine if any DS18S20s on the bus\r\nare using parasite power. During the read-time slot, parasite powered DS18S20s will pull the bus low, and externally powered DS18S20s will let the bus remain high. See\r\nthe Powering The DS18S20 section for usage information\r\nfor this command.\r\n1-Wire Signaling\r\nThe DS18S20 uses a strict 1-Wire communication protocol to ensure data integrity. Several signal types are\r\ndefined by this protocol: reset pulse, presence pulse,\r\nwrite 0, write 1, read 0, and read 1. All these signals, with\r\nthe exception of the presence pulse, are initiated by the\r\nbus master.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 12\r\nInitialization Procedure—Reset And\r\nPresence Pulses\r\nAll communication with the DS18S20 begins with an initialization sequence that consists of a reset pulse from the\r\nmaster followed by a presence pulse from the DS18S20.\r\nThis is illustrated in Figure 12. When the DS18S20 sends\r\nthe presence pulse in response to the reset, it is indicating\r\nto the master that it is on the bus and ready to operate.\r\nDuring the initialization sequence the bus master transmits (Tx) the reset pulse by pulling the 1-Wire bus low\r\nfor a minimum of 480µs. The bus master then releases\r\nthe bus and goes into receive mode (Rx). When the bus\r\nis released, the 5k? pullup resistor pulls the 1-Wire bus\r\nhigh. When the DS18S20 detects this rising edge, it waits\r\n15µs to 60µs and then transmits a presence pulse by pulling the 1-Wire bus low for 60µs to 240µs.\r\nRead/Write Time Slots\r\nThe bus master writes data to the DS18S20 during write\r\ntime slots and reads data from the DS18S20 during readtime slots. One bit of data is transmitted over the 1-Wire\r\nbus per time slot.\r\nWrite Time Slots\r\nThere are two types of write time slots: “Write 1” time slots\r\nand “Write 0” time slots. The bus master uses a Write 1\r\ntime slot to write a logic 1 to the DS18S20 and a Write\r\n0 time slot to write a logic 0 to the DS18S20. All write\r\ntime slots must be a minimum of 60µs in duration with a\r\nminimum of a 1µs recovery time between individual write\r\nslots. Both types of write time slots are initiated by the\r\nmaster pulling the 1-Wire bus low (see Figure 13).\r\nTo generate a Write 1 time slot, after pulling the 1-Wire\r\nbus low, the bus master must release the 1-Wire bus\r\nwithin 15µs. When the bus is released, the 5k? pullup\r\nresistor will pull the bus high. To generate a Write 0 time\r\nslot, after pulling the 1-Wire bus low, the bus master must\r\ncontinue to hold the bus low for the duration of the time\r\nslot (at least 60µs). The DS18S20 samples the 1-Wire\r\nbus during a window that lasts from 15µs to 60µs after the\r\nmaster initiates the write time slot. If the bus is high during\r\nthe sampling window, a 1 is written to the DS18S20. If the\r\nline is low, a 0 is written to the DS18S20.\r\nFigure 12. Initialization Timing\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\nDS18S20 PULLING LOW\r\nRESISTOR PULLUP\r\nGND\r\n1-Wire BUS\r\nDS18S20\r\nWAITS 15-60µs\r\nDS18S20 Tx\r\nPRESENCE PULSE\r\n60-240µs\r\nMASTER Rx\r\n480µs MINIMUM\r\nMASTER Tx RESET PULSE\r\n480µs MINIMUM\r\nVPU\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 13\r\nFigure 13. Read/Write Time Slot Timing Diagram\r\nVPU\r\nGND\r\n1-Wire BUS\r\n1µs < TREC < ?\r\nMIN\r\n> 1µs\r\nMASTER WRITE “0” SLOT MASTER WRITE “1” SLOT\r\nMASTER READ “0” SLOT MASTER READ “1” SLOT\r\nMASTER SAMPLES MASTER SAMPLES\r\nSTART\r\nOF SLOT\r\nSTART\r\nOF SLOT\r\nDS18S20 SAMPLES\r\n> 1µs\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\n60µs < Tx “0” < 120µs\r\nTYP MAX\r\n15µS 15µS 30µS 15µS 15µS 30µS\r\nMIN TYP MAX\r\nDS18S20 SAMPLES\r\n1µs < TREC < ?\r\nVPU\r\nGND\r\n1-Wire BUS\r\n15µs 45µs\r\n> 1µs\r\n15µs\r\nRESISTOR PULLUP\r\nDS18S20 PULLING LOW\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 14\r\nRead-Time Slots\r\nThe DS18S20 can only transmit data to the master when\r\nthe master issues read-time slots. Therefore, the master\r\nmust generate read-time slots immediately after issuing\r\na Read Scratchpad [BEh] or Read Power Supply [B4h]\r\ncommand, so that the DS18S20 can provide the requested data. In addition, the master can generate read-time\r\nslots after issuing Convert T [44h] or Recall E2 [B8h] commands to find out the status of the operation as explained\r\nin the DS18S20 Function Commands section.\r\nAll read-time slots must be a minimum of 60µs in duration\r\nwith a minimum of a 1µs recovery time between slots. A\r\nread-time slot is initiated by the master device pulling the\r\n1-Wire bus low for a minimum of 1µs and then releasing\r\nthe bus (see Figure 13). After the master initiates the\r\nread-time slot, the DS18S20 will begin transmitting a 1\r\nor 0 on bus. The DS18S20 transmits a 1 by leaving the\r\nbus high and transmits a 0 by pulling the bus low. When\r\ntransmitting a 0, the DS18S20 will release the bus by the\r\nend of the time slot, and the bus will be pulled back to\r\nits high idle state by the pullup resister. Output data from\r\nthe DS18S20 is valid for 15µs after the falling edge that\r\ninitiated the read-time slot. Therefore, the master must\r\nrelease the bus and then sample the bus state within\r\n15µs from the start of the slot.\r\nFigure 14 illustrates that the sum of TINIT, TRC, and\r\nTSAMPLE must be less than 15µs for a read-time slot.\r\nFigure 15 shows that system timing margin is maximized\r\nby keeping TINIT and TRC as short as possible and by\r\nlocating the master sample time during read-time slots\r\ntowards the end of the 15µs period.\r\nFigure 14. Detailed Master Read 1 Timing\r\nFigure 15. Recommended Master Read 1 Timing\r\nVPU\r\nGND\r\n1-Wire BUS\r\nMASTER SAMPLES\r\nVIH OF MASTER\r\nTINT > 1µs TRC\r\n15µs\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\nRESISTOR PULLUP\r\nVPU\r\nGND\r\n1-Wire BUS\r\nVIH OF MASTER\r\nTRC =\r\nSMALL\r\nMASTER SAMPLES TINT =\r\nSMALL\r\n15µs\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 15\r\nFigure 16. ROM Commands Flowchart\r\nCCh\r\nSKIP ROM\r\nCOMMAND\r\nMASTER Tx RESET PULSE\r\nDS18S20 Tx PRESENCE PULSE\r\nMASTER Tx ROM COMMAND\r\n33h\r\nREAD ROM\r\nCOMMAND\r\n55h\r\nMATCH ROM\r\nCOMMAND\r\nF0h\r\nSEARCH ROM\r\nCOMMAND\r\nECh\r\nALARM SEARCH\r\nCOMMAND\r\nMASTER Tx\r\nBIT 0\r\nDS18S20 Tx BIT 0\r\nDS18S20 Tx BIT 0\r\nMASTER Tx BIT 0\r\nBIT 0\r\nMATCH?\r\nMASTER Tx\r\nBIT 1\r\nBIT 1\r\nMATCH?\r\nBIT 63\r\nMATCH?\r\nMASTER Tx\r\nBIT 63\r\nN\r\nY Y Y\r\nN\r\nN\r\nY\r\nY\r\nY\r\nDS18S20 Tx BIT 1\r\nMASTER Tx BIT 1\r\nDS18S20 T BIT 63\r\nDS18S20 Tx BIT 63\r\nMASTER Tx BIT 63\r\nBIT 0\r\nMATCH?\r\nBIT 1\r\nMATCH?\r\nBIT 63\r\nMATCH?\r\nN\r\nY\r\nDS18S20 Tx\r\nFAMILY CODE\r\n1 BYTE\r\nDS18S20 Tx\r\nSERIAL NUMBER\r\n6 BYTES\r\nDS18S20 Tx\r\nCRC BYTE\r\nDS18S20 Tx BIT 0\r\nDS18S20 Tx BIT 0\r\nMASTER Tx BIT 0\r\nDEVICE(S)\r\nWITH ALARM\r\nFLAG SET?\r\nINITIALIZATION\r\nSEQUENCE\r\nMASTER Tx FUNCTION\r\nCOMMAND (FIGURE 17)\r\nN\r\nY\r\nN N\r\nY Y\r\nN\r\nY\r\nN N N\r\nY\r\nN\r\nDS18S20 Tx BIT 1\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 16\r\nFigure 17. DS18S20 Function Commands Flowchart\r\nMASTER Tx\r\nFUNCTION\r\nCOMMAND\r\nY\r\nN\r\n44h\r\nCONVERT\r\nTEMPERATURE\r\n?\r\nDS18S20 BEGINS\r\nCONVERSION\r\nDEVICE\r\nCONVERTING\r\nTEMPERATURE\r\n?\r\nN\r\nY\r\nMASTER\r\nRx “0s”\r\nMASTER\r\nRx “1s”\r\nMASTER ENABLES\r\nSTRONG PULLUP ON DQ\r\nDS18S20 CONVERTS\r\nTEMPERATURE\r\nMASTER DISABLES\r\nSTRONG PULLUP\r\nY\r\nN\r\n48h\r\nCOPY\r\nSCRATCHPAD\r\n?\r\nPARASITE\r\nPOWER\r\n?\r\nN\r\nMASTER ENABLES\r\nSTRONG PULL- UP ON DQ\r\nDATA COPIED FROM\r\nSCRATCHPAD TO EEPROM\r\nMASTER DISABLES\r\nSTRONG PULLUP\r\nMASTER\r\nRx “0s”\r\nCOPY IN\r\nPROGRESS\r\n?\r\nY\r\nMASTER\r\nRx “1s”\r\nRETURN TO INITIALIZATION SEQUENCE\r\n(FIGURE 16) FOR NEXT TRANSACTION\r\nB4h READ\r\nPOWER SUPPLY\r\n?\r\nY\r\nN\r\nPARASITE\r\nPOWERED\r\n?\r\nMASTER\r\nRx “1s”\r\nMASTER\r\nRx “0s”\r\nMASTER Tx TH BYTE\r\nTO SCRATCHPAD\r\nY\r\n4Eh\r\nWRITE\r\nSCRATCHPAD\r\n?\r\nMASTER Tx TL BYTE\r\nTO SCRATCHPAD\r\nY\r\nN\r\nY\r\nBEh\r\nREAD\r\nSCRATCH PAD\r\n?\r\nHAVE 8 BYTES\r\nBEEN READ\r\n?\r\nN\r\nMASTER\r\nTx RESET\r\n?\r\nMASTER Rx DATA BYTE\r\nFROM SCRATCHPAD\r\nN\r\nY\r\nMASTER Rx SCRATCHPAD\r\nCRC BYTE\r\nMASTER\r\nRx “1s”\r\nY\r\nN B8h\r\nRECALL E2\r\n?\r\nMASTER BEGINS DATA\r\nRECALL FROM E2 PROM\r\nDEVICE\r\nBUSY RECALLING\r\nDATA\r\n?\r\nN\r\nY\r\nMASTER\r\nRx “0s”\r\nPARASITE\r\nPOWER\r\n?\r\nY Y\r\nN\r\nN Y\r\nN\r\nN\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 17\r\nDs18S20 Operation Example 1\r\nIn this example there are multiple DS18S20s on the bus and they are using parasite power. The bus master initiates a\r\ntemperature conversion in a specific DS18S20 and then reads its scratchpad and recalculates the CRC to verify the data.\r\nDS18S20 Operation Example 2\r\nIn this example there is only one DS18S20 on the bus and it is using parasite power. The master writes to the TH and\r\nTL registers in the DS18S20 scratchpad and then reads the scratchpad and recalculates the CRC to verify the data. The\r\nmaster then copies the scratchpad contents to EEPROM.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20s respond with presence pulse.\r\nTx 55h Master issues Match ROM command.\r\nTx 64-bit ROM code Master sends DS18S20 ROM code.\r\nTx 44h Master issues Convert T command.\r\nTx DQ line held high by\r\nstrong pullup\r\nMaster applies strong pullup to DQ for the duration of the\r\nconversion (tCONV).\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20s respond with presence pulse.\r\nTx 55h Master issues Match ROM command.\r\nTx 64-bit ROM code Master sends DS18S20 ROM code.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then\r\nrecalculates the CRC of the first eight data bytes from the scratchpad\r\nand compares the calculated CRC with the read CRC (byte 9). If they\r\nmatch, the master continues; if not, the read operation is repeated.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 4Eh Master issues Write Scratchpad command.\r\nTx 2 data bytes Master sends two data bytes to scratchpad (TH and TL)\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then\r\nrecalculates the CRC of the first eight data bytes from the scratchpad\r\nand compares the calculated CRC with the read CRC (byte 9). If they\r\nmatch, the master continues; if not, the read operation is repeated.\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 48h Master issues Copy Scratchpad command.\r\nTx DQ line held high by\r\nstrong pullup\r\nMaster applies strong pullup to DQ for at least 10ms while copy\r\noperation is in progress.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 18\r\nDS18S20 Operation Example 3\r\nIn this example there is only one DS18S20 on the bus and it is using parasite power. The bus master initiates a temperature conversion then reads the DS18S20 scratchpad and calculates a higher resolution result using the data from the\r\ntemperature, COUNT REMAIN and COUNT PER °C registers.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nTx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 44h Master issues Convert T command.\r\nTx DQ line held high by\r\nstrong pullup Master applies strong pullup to DQ for the duration of the conversion (tCONV).\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then recalculates\r\nthe CRC of the first eight data bytes from the scratchpad and compares\r\nthe calculated CRC with the read CRC (byte 9). If they match, the master\r\ncontinues; if not, the read operation is repeated. The master also calculates\r\nthe TEMP_READ value and stores the contents of the COUNT REMAIN and\r\nCount Per °C registers.\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\n— — CPU calculates extended resolution temperature using the equation in\r\nthe Operation—Measuring Temperature section.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 19\r\n+Denotes a lead(Pb)-free/RoHS-compliant package. A “+”\r\nappears on the top mark of lead(Pb)-free packages.\r\nT&R = Tape and reel.\r\n*TO-92 packages in tape and reel can be ordered with straight\r\nor formed leads. Choose “SL” for straight leads. Bulk TO-92\r\norders are straight leads only.\r\nPART TEMP RANGE PIN-PACKAGE\r\nDS18S20+ –55°C to +125°C 3 TO-92\r\nDS18S20+T&R –55°C to +125°C 3 TO-92 (2000 Piece)\r\nDS18S20-SL+T&R –55°C to +125°C 3 TO-92 (2000 Piece)*\r\nDS18S20Z –55°C to +125°C 8 SO\r\nDS18S20Z+ –55°C to +125°C 8 SO\r\nDS18S20Z/T&R –55°C to +125°C 8 SO (2500 Piece)\r\nDS18S20Z+T&R –55°C to +125°C 8 SO (2500 Piece)\r\nPACKAGE\r\nTYPE\r\nPACKAGE\r\nCODE\r\nOUTLINE\r\nNO.\r\nLAND\r\nPATTERN NO.\r\n8 SO S8-2 21-0041 90-0096\r\n3 TO-92\r\n(straight leads) Q3-1 21-0248 —\r\n3 TO-92\r\n(formed leads) Q3-4 21-0250 —\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 20\r\nOrdering Information Package Information\r\nFor the latest package outline information and land patterns\r\n(footprints), go to www.maximintegrated.com/packages. Note\r\nthat a “+”, “#”, or “-” in the package code indicates RoHS status\r\nonly. Package drawings may show a different suffix character, but\r\nthe drawing pertains to the package regardless of RoHS status.\r\nREVISION\r\nNUMBER\r\nREVISION\r\nDATE DESCRIPTION PAGES\r\nCHANGED\r\n0 4/08\r\nIn the Ordering Information table, added TO-92 straight-lead packages and\r\nincluded a note that the TO-92 package in tape and reel can be ordered with either\r\nformed or straight leads\r\n2\r\n1 8/10\r\nRemoved the Top Mark column from the Ordering Information table; added the\r\ncontinuous power dissipation and lead and soldering temperatures to the Absolute\r\nMaximum Ratings section\r\n2, 20\r\n2 1/15 Updated General Description and Benefits and Features section and added\r\nApplications section 1\r\n3 4/15 Revised Pin Configuration and Ordering Information 1, 20\r\nMaxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent licenses\r\nare implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits)\r\nshown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.\r\nMaxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc. © 2015 Maxim Integrated Products, Inc. ? 21\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nRevision History\r\nFor pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.', 'capteur luminosite', 5, 123456);
INSERT INTO `catalogue` (`idCatalogue`, `datasheet`, `nom`, `prix`, `reference`) VALUES
(2, 'Pin Configurations\r\nGeneral Description\r\nThe DS18S20 digital thermometer provides 9-bit Celsius\r\ntemperature measurements and has an alarm function\r\nwith nonvolatile user-programmable upper and lower trigger points. The DS18S20 communicates over a 1-Wire\r\nbus that by definition requires only one data line (and\r\nground) for communication with a central microprocessor.\r\nIn addition, the DS18S20 can derive power directly from\r\nthe data line (“parasite power”), eliminating the need for\r\nan external power supply.\r\nEach DS18S20 has a unique 64-bit serial code, which\r\nallows multiple DS18S20s to function on the same 1-Wire\r\nbus. Thus, it is simple to use one microprocessor to\r\ncontrol many DS18S20s distributed over a large area.\r\nApplications that can benefit from this feature include\r\nHVAC environmental controls, temperature monitoring\r\nsystems inside buildings, equipment, or machinery, and\r\nprocess monitoring and control systems.\r\nApplications\r\n? Thermostatic Controls\r\n? Industrial Systems\r\n? Consumer Products\r\n? Thermometers\r\n? Thermally Sensitive Systems\r\nBenefits and Features\r\n? Unique 1-Wire® Interface Requires Only One Port\r\nPin for Communication\r\n? Maximize System Accuracy in Broad Range of\r\nThermal Management Applications\r\n• Measures Temperatures from -55°C to +125°C\r\n(-67°F to +257°F)\r\n• ±0.5°C Accuracy from -10°C to +85°C\r\n• 9-Bit Resolution\r\n• No External Components Required\r\n? Parasite Power Mode Requires Only 2 Pins for\r\nOperation (DQ and GND)\r\n? Simplifies Distributed Temperature-Sensing\r\nApplications with Multidrop Capability\r\n• Each Device Has a Unique 64-Bit Serial Code\r\nStored in On-Board ROM\r\n? Flexible User-Definable Nonvolatile (NV) Alarm Settings\r\nwith Alarm Search Command Identifies Devices with\r\nTemperatures Outside Programmed Limits\r\n? Available in 8-Pin SO (150 mils) and 3-Pin TO-92\r\nPackages\r\nOrdering Information appears at end of data sheet.\r\n1-Wire is a registered trademark of Maxim Integrated Products, Inc.\r\n19-5474; Rev 3; 4/15\r\nBOTTOM VIEW\r\n2\r\nN.C.\r\nN.C.\r\nVDD\r\nDQ\r\nN.C.\r\nN.C.\r\nN.C.\r\nGND\r\nDS18S20\r\nSO (150 mils)\r\n(DS18S20Z)\r\n+ 1\r\n4\r\n3\r\n7\r\n8\r\n5\r\n6\r\nDS18S20\r\n1 2 3\r\nGND DQ VDD\r\n1\r\n1 2 3\r\nTOP VIEW\r\nTO-92\r\n(DS18S20)\r\nDS18S20 High-Precision 1-Wire Digital Thermometer \r\nVoltage Range on Any Pin Relative to Ground....-0.5V to +6.0V\r\nContinuous Power Dissipation (TA = +70°C)\r\n8-Pin SO (derate 5.9mW/°C above +70°C)..............470.6mW\r\n3-Pin TO-92 (derate 6.3mW/°C above +70°C)............500mW\r\nOperating Temperature Range......................... -55°C to +125°C\r\nStorage Temperature Range............................ -55°C to +125°C\r\nLead Temperature (soldering, 10s) .................................+260°C\r\nSoldering Temperature (reflow)\r\nLead(Pb)-free...............................................................+260°C\r\nContaining lead(Pb).....................................................+240°C\r\nNote 1: All voltages are referenced to ground.\r\nNote 2: The Pullup Supply Voltage specification assumes that the pullup device is ideal, and therefore the high level of the pullup is equal to VPU. In order to meet the VIH spec of the DS18S20, the actual supply rail for the strong pullup transistor\r\nmust include margin for the voltage drop across the transistor when it is turned on; thus: VPU_ACTUAL = VPU_IDEAL +\r\nVTRANSISTOR.\r\nNote 3: See typical performance curve in Figure 1.\r\nNote 4: Logic-low voltages are specified at a sink current of 4mA.\r\nNote 5: To guarantee a presence pulse under low voltage parasite power conditions, VILMAX may have to be reduced to as\r\nlow as 0.5V.\r\nNote 6: Logic-high voltages are specified at a source current of 1mA.\r\nNote 7: Standby current specified up to +70°C. Standby current typically is 3µA at +125°C.\r\nNote 8: To minimize IDDS, DQ should be within the following ranges: GND ? DQ ? GND + 0.3V or VDD – 0.3V ? DQ ? VDD.\r\nNote 9: Active current refers to supply current during active temperature conversions or EEPROM writes.\r\nNote 10: DQ line is high (“high-Z” state).\r\nNote 11: Drift data is based on a 1000-hour stress test at +125°C with VDD = 5.5V.\r\n(VDD = 3.0V to 5.5V, TA = -55°C to +125°C, unless otherwise noted.)\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nSupply Voltage VDD Local Power (Note 1) +3.0 +5.5 V\r\nPullup Supply Voltage VPU\r\nParasite Power\r\n(Note 1, 2)\r\n+3.0 +5.5\r\nV\r\nLocal Power +3.0 VDD\r\nThermometer Error tERR\r\n-10°C to +85°C\r\n(Note 3)\r\n±0.5\r\n°C\r\n-55°C to +125°C ±2\r\nInput Logic-Low VIL (Note 1, 4, 5) -0.3 +0.8 V\r\nInput Logic-High VIH\r\nLocal Power\r\n(Note 1, 6)\r\n+2.2 The lower of\r\n5.5 or VDD\r\n+ 0.3\r\nV\r\nParasite Power +3.0\r\nSink Current IL VI/O = 0.4V (Note 1) 4.0 mA\r\nStandby Current IDDS (Note 7, 8) 750 1000 nA\r\nActive Current IDD VDD = 5V (Note 9) 1 1.5 mA\r\nDQ Input Current IDQ (Note 10) 5 µA\r\nDrift (Note 11) ±0.2 °C\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 2\r\nAbsolute Maximum Ratings\r\nThese are stress ratings only and functional operation of the device at these or any other conditions above those indicated in the operation sections of this specification is not implied. Exposure\r\nto absolute maximum rating conditions for extended periods of time may affect reliability.\r\nDC Electrical Characteristics\r\n(VDD = 3.0V to 5.5V, TA = -55°C to +100°C, unless otherwise noted.)\r\n(VDD = 3.0V to 5.5V; TA = -55°C to +125°C, unless otherwise noted.)\r\nNote 12: See the timing diagrams in Figure 2.\r\nNote 13: Under parasite power, if tRSTL > 960µs, a power-on reset may occur.\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nNV Write Cycle Time tWR 2 10 ms\r\nEEPROM Writes NEEWR -55°C to +55°C 50k writes\r\nEEPROM Data Retention tEEDR -55°C to +55°C 10 years\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nTemperature Conversion Time tCONV (Note 12) 750 ms\r\nTime to Strong Pullup On tSPON Start Convert T Command Issued 10 µs\r\nTime Slot tSLOT (Note 12) 60 120 µs\r\nRecovery Time tREC (Note 12) 1 µs\r\nWrite 0 Low Time tLOW0 (Note 12) 60 120 µs\r\nWrite 1 Low Time tLOW1 (Note 12) 1 15 µs\r\nRead Data Valid tRDV (Note 12) 15 µs\r\nReset Time High tRSTH (Note 12) 480 µs\r\nReset Time Low tRSTL (Note 12, 13) 480 µs\r\nPresence-Detect High tPDHIGH (Note 12) 15 60 µs\r\nPresence-Detect Low tPDLOW (Note 12) 60 240 µs\r\nCapacitance CIN/OUT 25 pF\r\nFigure 1. Typical Performance Curve\r\nDS18S20 TYPICAL ERROR CURVE\r\n0.5\r\n0.4\r\n0.3\r\n0.2\r\n0.1\r\n0\r\n-0.1\r\n-0.2\r\n-0.3\r\n-0.4\r\n-0.5\r\nTHERMOMETER ERROR (°C)\r\n0 10 20 30 40 50 60 70\r\nTEMPERATURE (°C)\r\n+3s ERROR\r\nMEAN ERROR\r\n-3s ERROR\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 3\r\nAC Electrical Characteristics—NV Memory\r\nAC Electrical Characteristics\r\nPIN\r\nNAME FUNCTION\r\nTO-92 SO\r\n1 5 GND Ground\r\n2 4 DQ Data Input/Output. Open-drain 1-Wire interface pin. Also provides power to the\r\ndevice when used in parasite power mode (see the Powering the DS18S20 section.)\r\n3 3 VDD Optional VDD. VDD must be grounded for operation in parasite power mode.\r\n— 1, 2, 6, 7, 8 N.C. No Connection\r\nFigure 2. Timing Diagrams\r\nSTART OF NEXT CYCLE\r\n1-Wire WRITE ZERO TIME SLOT\r\ntREC\r\ntSLOT\r\ntLOW0\r\n1-Wire READ ZERO TIME SLOT\r\ntREC\r\ntSLOT START OF NEXT CYCLE\r\ntRDV\r\n1-Wire RESET PULSE\r\n1-Wire PRESENCE DETECT\r\ntRSTL tRSTH\r\ntPDHIGH\r\nPRESENCE DETECT\r\ntPDLOW\r\nRESET PULSE FROM HOST\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 4\r\nPin Description\r\nOverview\r\nFigure 3 shows a block diagram of the DS18S20, and\r\npin descriptions are given in the Pin Description table.\r\nThe 64-bit ROM stores the device’s unique serial code.\r\nThe scratchpad memory contains the 2-byte temperature\r\nregister that stores the digital output from the temperature\r\nsensor. In addition, the scratchpad provides access to the\r\n1-byte upper and lower alarm trigger registers (TH and\r\nTL). The TH and TL registers are nonvolatile (EEPROM),\r\nso they will retain data when the device is powered down.\r\nThe DS18S20 uses Maxim’s exclusive 1-Wire bus protocol that implements bus communication using one control\r\nsignal. The control line requires a weak pullup resistor\r\nsince all devices are linked to the bus via a 3-state or\r\nopen-drain port (the DQ pin in the case of the DS18S20).\r\nIn this bus system, the microprocessor (the master\r\ndevice) identifies and addresses devices on the bus\r\nusing each device’s unique 64-bit code. Because each\r\ndevice has a unique code, the number of devices that\r\ncan be addressed on one bus is virtually unlimited. The\r\n1-Wire bus protocol, including detailed explanations of the\r\ncommands and “time slots,” is covered in the 1-Wire Bus\r\nSystem section.\r\nAnother feature of the DS18S20 is the ability to operate\r\nwithout an external power supply. Power is instead supplied through the 1-Wire pullup resistor via the DQ pin\r\nwhen the bus is high. The high bus signal also charges an\r\ninternal capacitor (CPP), which then supplies power to the\r\ndevice when the bus is low. This method of deriving power\r\nfrom the 1-Wire bus is referred to as “parasite power.” As\r\nan alternative, the DS18S20 may also be powered by an\r\nexternal supply on VDD.\r\nOperation—Measuring Temperature\r\nThe core functionality of the DS18S20 is its direct-to-digital temperature sensor. The temperature sensor output\r\nhas 9-bit resolution, which corresponds to 0.5°C steps.\r\nThe DS18S20 powers-up in a low-power idle state; to\r\ninitiate a temperature measurement and A-to-D conversion, the master must issue a Convert T [44h] command.\r\nFollowing the conversion, the resulting thermal data is\r\nstored in the 2-byte temperature register in the scratchpad memory and the DS18S20 returns to its idle state.\r\nIf the DS18S20 is powered by an external supply, the\r\nmaster can issue “read-time slots” (see the 1-Wire Bus\r\nSystem section) after the Convert T command and the\r\nDS18S20 will respond by transmitting 0 while the temperature conversion is in progress and 1 when the conversion is done. If the DS18S20 is powered with parasite\r\npower, this notification technique cannot be used since\r\nthe bus must be pulled high by a strong pullup during the\r\nentire temperature conversion. The bus requirements for\r\nparasite power are explained in detail in the Powering The\r\nDS18S20 section.\r\nFigure 3. DS18S20 Block Diagram\r\nVPU\r\n64-BIT ROM\r\nAND\r\n1-Wire PORT\r\nDQ\r\nVDD\r\nINTERNAL VDD\r\nCPP\r\nPARASITE POWER CIRCUIT MEMORY\r\nCONTROL LOGIC\r\nSCRATCHPAD\r\n8-BIT CRC\r\nGENERATOR\r\nTEMPERATURE\r\nSENSOR\r\nALARM HIGH TRIGGER (TH)\r\nREGISTER (EEPROM)\r\nALARM LOW TRIGGER (TL)\r\nREGISTER (EEPROM)\r\nGND\r\nDS18S20 4.7k?\r\nPOWERSUPPLY SENSE\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 5\r\nThe DS18S20 output data is calibrated in degrees centigrade; for Fahrenheit applications, a lookup table or\r\nconversion routine must be used. The temperature data is\r\nstored as a 16-bit sign-extended two’s complement number in the temperature register (see Figure 4). The sign\r\nbits (S) indicate if the temperature is positive or negative:\r\nfor positive numbers S = 0 and for negative numbers S =\r\n1. Table 1 gives examples of digital output data and the\r\ncorresponding temperature reading.\r\nResolutions greater than 9 bits can be calculated using the\r\ndata from the temperature, COUNT REMAIN and COUNT\r\nPER °C registers in the scratchpad. Note that the COUNT\r\nPER °C register is hard-wired to 16 (10h). After reading\r\nthe scratchpad, the TEMP_READ value is obtained by\r\ntruncating the 0.5°C bit (bit 0) from the temperature data\r\n(see Figure 4). The extended resolution temperature can\r\nthen be calculated using the following equation:\r\nTEMPERATURE TEMP_READ 0.25\r\nCOUNT_PER_C COUNT_REMAIN\r\nCOUNT_PER_C\r\n= ?\r\n? +\r\nOperation—Alarm Signaling\r\nAfter the DS18S20 performs a temperature conversion,\r\nthe temperature value is compared to the user-defined\r\ntwo’s complement alarm trigger values stored in the\r\n1-byte TH and TL registers (see Figure 5). The sign bit (S)\r\nindicates if the value is positive or negative: for positive\r\nnumbers S = 0 and for negative numbers S = 1. The TH\r\nand TL registers are nonvolatile (EEPROM) so they will\r\nretain data when the device is powered down. TH and TL\r\ncan be accessed through bytes 2 and 3 of the scratchpad\r\nas explained in the Memory section.\r\nOnly bits 8 through 1 of the temperature register are used\r\nin the TH and TL comparison since TH and TL are 8-bit\r\nregisters. If the measured temperature is lower than or\r\nequal to TL or higher than TH, an alarm condition exists\r\nand an alarm flag is set inside the DS18S20. This flag is\r\nupdated after every temperature measurement; therefore,\r\nif the alarm condition goes away, the flag will be turned off\r\nafter the next temperature conversion.\r\nTable 1. Temperature/Data Relationship\r\n*The power-on reset value of the temperature register is +85°C.\r\nTEMPERATURE (°C) DIGITAL OUTPUT (BINARY) DIGITAL OUTPUT (HEX)\r\n+85.0* 0000 0000 1010 1010 00AAh\r\n+25.0 0000 0000 0011 0010 0032h\r\n+0.5 0000 0000 0000 0001 0001h\r\n0 0000 0000 0000 0000 0000h\r\n-0.5 1111 1111 1111 1111 FFFFh\r\n-25.0 1111 1111 1100 1110 FFCEh\r\n-55.0 1111 1111 1001 0010 FF92h\r\nFigure 4. Temperature Register Format\r\nFigure 5. TH and TL Register Format\r\nBIT 7 BIT 6 BIT 5 BIT 4 BIT 3 BIT 2 BIT 1 BIT 0\r\nLS BYTE 26 25 24 23 22 21 20 2-1\r\nBIT 15 BIT 14 BIT 13 BIT 12 BIT 11 BIT 10 BIT 9 BIT 8\r\nMS BYTE S S S S S S S S\r\nS = SIGN\r\nBIT 7 BIT 6 BIT 5 BIT 4 BIT 3 BIT 2 BIT 1 BIT 0\r\nS 26 25 25 25 22 21 20\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 6\r\nThe master device can check the alarm flag status of\r\nall DS18S20s on the bus by issuing an Alarm Search\r\n[ECh] command. Any DS18S20s with a set alarm flag will\r\nrespond to the command, so the master can determine\r\nexactly which DS18S20s have experienced an alarm\r\ncondition. If an alarm condition exists and the TH or TL\r\nsettings have changed, another temperature conversion\r\nshould be done to validate the alarm condition.\r\nPowering The DS18S20\r\nThe DS18S20 can be powered by an external supply on\r\nthe VDD pin, or it can operate in “parasite power” mode,\r\nwhich allows the DS18S20 to function without a local\r\nexternal supply. Parasite power is very useful for applications that require remote temperature sensing or those\r\nwith space constraints. Figure 3 shows the DS18S20’s\r\nparasite-power control circuitry, which “steals” power from\r\nthe 1-Wire bus via the DQ pin when the bus is high. The\r\nstolen charge powers the DS18S20 while the bus is high,\r\nand some of the charge is stored on the parasite power\r\ncapacitor (CPP) to provide power when the bus is low.\r\nWhen the DS18S20 is used in parasite power mode, the\r\nVDD pin must be connected to ground.\r\nIn parasite power mode, the 1-Wire bus and CPP can\r\nprovide sufficient current to the DS18S20 for most operations as long as the specified timing and voltage requirements are met (see the DC Electrical Characteristics\r\nand the AC Electrical Characteristics). However, when\r\nthe DS18S20 is performing temperature conversions or\r\ncopying data from the scratchpad memory to EEPROM,\r\nthe operating current can be as high as 1.5mA. This\r\ncurrent can cause an unacceptable voltage drop across\r\nthe weak 1-Wire pullup resistor and is more current than\r\ncan be supplied by CPP. To assure that the DS18S20\r\nhas sufficient supply current, it is necessary to provide a\r\nstrong pullup on the 1-Wire bus whenever temperature\r\nconversions are taking place or data is being copied from\r\nthe scratchpad to EEPROM. This can be accomplished\r\nby using a MOSFET to pull the bus directly to the rail\r\nas shown in Figure 6. The 1-Wire bus must be switched\r\nto the strong pullup within 10µs (max) after a Convert T\r\n[44h] or Copy Scratchpad [48h] command is issued, and\r\nthe bus must be held high by the pullup for the duration\r\nof the conversion (tCONV) or data transfer (tWR = 10ms).\r\nNo other activity can take place on the 1-Wire bus while\r\nthe pullup is enabled.\r\nThe DS18S20 can also be powered by the conventional\r\nmethod of connecting an external power supply to the\r\nVDD pin, as shown in Figure 7. The advantage of this\r\nmethod is that the MOSFET pullup is not required, and\r\nthe 1-Wire bus is free to carry other traffic during the temperature conversion time.\r\nThe use of parasite power is not recommended for temperatures above 100°C since the DS18S20 may not be\r\nable to sustain communications due to the higher leakage currents that can exist at these temperatures. For\r\napplications in which such temperatures are likely, it is\r\nstrongly recommended that the DS18S20 be powered by\r\nan external power supply.\r\nIn some situations the bus master may not know whether\r\nthe DS18S20s on the bus are parasite powered or powered by external supplies. The master needs this information to determine if the strong bus pullup should be used\r\nduring temperature conversions. To get this information,\r\nthe master can issue a Skip ROM [CCh] command followed by a Read Power Supply [B4h] command followed\r\nby a “read-time slot”. During the read-time slot, parasite\r\npowered DS18S20s will pull the bus low, and externally\r\npowered DS18S20s will let the bus remain high. If the\r\nbus is pulled low, the master knows that it must supply\r\nthe strong pullup on the 1-Wire bus during temperature\r\nconversions.\r\nFigure 6. Supplying the Parasite-Powered DS18S20 During\r\nTemperature Conversions\r\nFigure 7. Powering the DS18S20 with an External Supply\r\nVPU\r\n4.7k?\r\nVPU\r\n1-Wire BUS\r\nDS18S20\r\nGND DQ VDD\r\nTO OTHER\r\n1-Wire DEVICES\r\nµP\r\nVDD\r\n(EXTERNAL SUPPLY)\r\nVPU\r\n4.7k?\r\n1-Wire BUS\r\nDS18S20\r\nGND DQ VDD\r\nTO OTHER\r\n1-Wire DEVICES\r\nµP\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 7\r\n64-Bit Lasered ROM Code\r\nEach DS18S20 contains a unique 64-bit code (see\r\nFigure 8) stored in ROM. The least significant 8 bits of the\r\nROM code contain the DS18S20’s 1-Wire family code:\r\n10h. The next 48 bits contain a unique serial number.\r\nThe most significant 8 bits contain a cyclic redundancy\r\ncheck (CRC) byte that is calculated from the first 56 bits\r\nof the ROM code. A detailed explanation of the CRC bits\r\nis provided in the CRC Generation section. The 64-bit\r\nROM code and associated ROM function control logic\r\nallow the DS18S20 to operate as a 1-Wire device using\r\nthe protocol detailed in the 1-Wire Bus System section.\r\nMemory\r\nThe DS18S20’s memory is organized as shown in\r\nFigure 9. The memory consists of an SRAM scratchpad with nonvolatile EEPROM storage for the high and\r\nlow alarm trigger registers (TH and TL). Note that if the\r\nDS18S20 alarm function is not used, the TH and TL registers can serve as general-purpose memory. All memory commands are described in detail in the DS18S20\r\nFunction Commands section.\r\nByte 0 and byte 1 of the scratchpad contain the LSB and\r\nthe MSB of the temperature register, respectively. These\r\nbytes are read-only. Bytes 2 and 3 provide access to TH\r\nand TL registers. Bytes 4 and 5 are reserved for internal\r\nuse by the device and cannot be overwritten; these bytes\r\nwill return all 1s when read. Bytes 6 and 7 contain the\r\nCOUNT REMAIN and COUNT PER ºC registers, which\r\ncan be used to calculate extended resolution results as\r\nexplained in the Operation—Measuring Temperature\r\nsection.\r\nByte 8 of the scratchpad is read-only and contains the\r\nCRC code for bytes 0 through 7 of the scratchpad.\r\nThe DS18S20 generates this CRC using the method\r\ndescribed in the CRC Generation section.\r\nData is written to bytes 2 and 3 of the scratchpad using\r\nthe Write Scratchpad [4Eh] command; the data must be\r\ntransmitted to the DS18S20 starting with the least significant bit of byte 2. To verify data integrity, the scratchpad\r\ncan be read (using the Read Scratchpad [BEh] command)\r\nafter the data is written. When reading the scratchpad,\r\ndata is transferred over the 1-Wire bus starting with the\r\nleast significant bit of byte 0. To transfer the TH and TL\r\ndata from the scratchpad to EEPROM, the master must\r\nissue the Copy Scratchpad [48h] command.\r\nFigure 8. 64-Bit Lasered ROM Code\r\nFigure 9. DS18S20 Memory Map\r\n8-BIT CRC 48-BIT SERIAL NUMBER 8-BIT FAMILY CODE (10h)\r\nMSB LSB MSB LSB MSB LSB\r\nBYTE 0\r\nBYTE 1\r\nTEMPERATURE LSB (AAh)\r\nTEMPERATURE MSB (00h) (85°C)\r\nBYTE 2\r\nBYTE 3\r\nTH REGISTER OR USER BYTE 1*\r\nTL REGISTER OR USER BYTE 2*\r\nBYTE 4\r\nBYTE 5\r\nRESERVED (FFh)\r\nRESERVED (FFh)\r\nBYTE 6\r\nBYTE 7\r\nCOUNT REMAIN (0Ch)\r\nCOUNT PER °C (10h)\r\nBYTE 8 CRC*\r\n*POWER-UP STATE DEPENDS ON VALUE(S) STORED IN EEPROM.\r\nTH REGISTER OR USER BYTE 1\r\nTL REGISTER OR USER BYTE 2\r\nSCRATCHPAD\r\n(POWER-UP STATE)\r\nEEPROM\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 8\r\nData in the EEPROM registers is retained when the\r\ndevice is powered down; at power-up the EEPROM data\r\nis reloaded into the corresponding scratchpad locations.\r\nData can also be reloaded from EEPROM to the scratchpad at any time using the Recall E2 [B8h] command.\r\nThe master can issue “read-time slots” (see the 1-Wire\r\nBus System section) following the Recall E2 command\r\nand the DS18S20 will indicate the status of the recall by\r\ntransmitting 0 while the recall is in progress and 1 when\r\nthe recall is done.\r\nCRC Generation\r\nCRC bytes are provided as part of the DS18S20’s 64-bit\r\nROM code and in the 9th byte of the scratchpad memory.\r\nThe ROM code CRC is calculated from the first 56 bits\r\nof the ROM code and is contained in the most significant\r\nbyte of the ROM. The scratchpad CRC is calculated from\r\nthe data stored in the scratchpad, and therefore it changes when the data in the scratchpad changes. The CRCs\r\nprovide the bus master with a method of data validation\r\nwhen data is read from the DS18S20. To verify that data\r\nhas been read correctly, the bus master must re-calculate\r\nthe CRC from the received data and then compare this\r\nvalue to either the ROM code CRC (for ROM reads) or\r\nto the scratchpad CRC (for scratchpad reads). If the calculated CRC matches the read CRC, the data has been\r\nreceived error free. The comparison of CRC values and\r\nthe decision to continue with an operation are determined\r\nentirely by the bus master. There is no circuitry inside the\r\nDS18S20 that prevents a command sequence from proceeding if the DS18S20 CRC (ROM or scratchpad) does\r\nnot match the value generated by the bus master.\r\nThe equivalent polynomial function of the CRC (ROM or\r\nscratchpad) is:\r\nCRC = X8 + X5 + X4 + 1\r\nThe bus master can re-calculate the CRC and compare it\r\nto the CRC values from the DS18S20 using the polynomial generator shown in Figure 10. This circuit consists\r\nof a shift register and XOR gates, and the shift register\r\nbits are initialized to 0. Starting with the least significant\r\nbit of the ROM code or the least significant bit of byte 0\r\nin the scratchpad, one bit at a time should shifted into the\r\nshift register. After shifting in the 56th bit from the ROM or\r\nthe most significant bit of byte 7 from the scratchpad, the\r\npolynomial generator will contain the re-calculated CRC.\r\nNext, the 8-bit ROM code or scratchpad CRC from the\r\nDS18S20 must be shifted into the circuit. At this point, if\r\nthe re-calculated CRC was correct, the shift register will\r\ncontain all 0s. Additional information about the Maxim\r\n1-Wire cyclic redundancy check is available in Application\r\nNote 27: Understanding and Using Cyclic Redundancy\r\nChecks with Maxim ?Button Products.\r\n1-Wire Bus System\r\nThe 1-Wire bus system uses a single bus master to control one or more slave devices. The DS18S20 is always a\r\nslave. When there is only one slave on the bus, the system is referred to as a “single-drop” system; the system is\r\n“multidrop” if there are multiple slaves on the bus.\r\nAll data and commands are transmitted least significant\r\nbit first over the 1-Wire bus.\r\nThe following discussion of the 1-Wire bus system is\r\nbroken down into three topics: hardware configuration,\r\ntransaction sequence, and 1-Wire signaling (signal types\r\nand timing).\r\nFigure 10. CRC Generator\r\n(MSB) (LSB)\r\nXOR XOR XOR\r\nINPUT\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 9\r\nHardware Configuration\r\nThe 1-Wire bus has by definition only a single data line.\r\nEach device (master or slave) interfaces to the data line via\r\nan open drain or 3-state port. This allows each device to\r\n“release” the data line when the device is not transmitting\r\ndata so the bus is available for use by another device. The\r\n1-Wire port of the DS18S20 (the DQ pin) is open drain with\r\nan internal circuit equivalent to that shown in Figure 11.\r\nThe 1-Wire bus requires an external pullup resistor of\r\napproximately 5k?; thus, the idle state for the 1-Wire\r\nbus is high. If for any reason a transaction needs to be\r\nsuspended, the bus MUST be left in the idle state if the\r\ntransaction is to resume. Infinite recovery time can occur\r\nbetween bits so long as the 1-Wire bus is in the inactive\r\n(high) state during the recovery period. If the bus is held\r\nlow for more than 480µs, all components on the bus will\r\nbe reset.\r\nTransaction Sequence\r\nThe transaction sequence for accessing the DS18S20 is\r\nas follows:\r\nStep 1. Initialization\r\nStep 2. ROM Command (followed by any required data\r\nexchange)\r\nStep 3. DS18S20 Function Command (followed by any\r\nrequired data exchange)\r\nIt is very important to follow this sequence every time the\r\nDS18S20 is accessed, as the DS18S20 will not respond\r\nif any steps in the sequence are missing or out of order.\r\nExceptions to this rule are the Search ROM [F0h] and\r\nAlarm Search [ECh] commands. After issuing either of\r\nthese ROM commands, the master must return to Step 1\r\nin the sequence.\r\nInitialization\r\nAll transactions on the 1-Wire bus begin with an initialization sequence. The initialization sequence consists of a\r\nreset pulse transmitted by the bus master followed by\r\npresence pulse(s) transmitted by the slave(s). The presence pulse lets the bus master know that slave devices\r\n(such as the DS18S20) are on the bus and are ready\r\nto operate. Timing for the reset and presence pulses is\r\ndetailed in the 1-Wire Signaling section.\r\nROM Commands\r\nAfter the bus master has detected a presence pulse, it\r\ncan issue a ROM command. These commands operate\r\non the unique 64-bit ROM codes of each slave device and\r\nallow the master to single out a specific device if many\r\nare present on the 1-Wire bus. These commands also\r\nallow the master to determine how many and what types\r\nof devices are present on the bus or if any device has\r\nexperienced an alarm condition. There are five ROM commands, and each command is 8 bits long. The master\r\ndevice must issue an appropriate ROM command before\r\nissuing a DS18S20 function command. A flowchart for\r\noperation of the ROM commands is shown in Figure 16.\r\nSearch Rom [F0h]\r\nWhen a system is initially powered up, the master must\r\nidentify the ROM codes of all slave devices on the bus,\r\nwhich allows the master to determine the number of\r\nslaves and their device types. The master learns the ROM\r\ncodes through a process of elimination that requires the\r\nmaster to perform a Search ROM cycle (i.e., Search ROM\r\ncommand followed by data exchange) as many times as\r\nnecessary to identify all of the slave devices. If there is\r\nonly one slave on the bus, the simpler Read ROM command (see below) can be used in place of the Search\r\nROM process. For a detailed explanation of the Search\r\nROM procedure, refer to the ?Button® Book of Standards\r\nat www.maximintegrated.com/ibuttonbook. After every\r\nSearch ROM cycle, the bus master must return to Step 1\r\n(Initialization) in the transaction sequence.\r\nRead ROM [33h]\r\nThis command can only be used when there is one slave\r\non the bus. It allows the bus master to read the slave’s\r\n64-bit ROM code without using the Search ROM procedure. If this command is used when there is more than\r\none slave present on the bus, a data collision will occur\r\nwhen all the slaves attempt to respond at the same time.\r\n?Button is a registered trademark of Maxim Integrated Products, Inc.\r\nFigure 11. Hardware Configuration\r\nDQ\r\nVPU\r\n4.7k? DS18S20\r\n1-Wire PORT\r\nRx\r\nTx\r\n100?\r\nMOSFET\r\n5µA\r\nTYP\r\nRx 1-Wire BUS\r\nTx\r\nRx = RECEIVE\r\nTx = TRANSMIT\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 10\r\nNote 1: For parasite-powered DS18S20s, the master must enable a strong pullup on the 1-Wire bus during temperature conversions and copies from the scratchpad to EEPROM. No other bus activity may take place during this time.\r\nNote 2: The master can interrupt the transmission of data at any time by issuing a reset.\r\nNote 3: Both bytes must be written before a reset is issued.\r\nMatch ROM [55h]\r\nThe match ROM command followed by a 64-bit ROM\r\ncode sequence allows the bus master to address a\r\nspecific slave device on a multidrop or single-drop bus.\r\nOnly the slave that exactly matches the 64-bit ROM code\r\nsequence will respond to the function command issued\r\nby the master; all other slaves on the bus will wait for a\r\nreset pulse.\r\nSkip ROM [CCh]\r\nThe master can use this command to address all devices\r\non the bus simultaneously without sending out any ROM\r\ncode information. For example, the master can make all\r\nDS18S20s on the bus perform simultaneous temperature\r\nconversions by issuing a Skip ROM command followed by\r\na Convert T [44h] command.\r\nNote that the Read Scratchpad [BEh] command can follow the Skip ROM command only if there is a single slave\r\ndevice on the bus. In this case, time is saved by allowing\r\nthe master to read from the slave without sending the\r\ndevice’s 64-bit ROM code. A Skip ROM command followed\r\nby a Read Scratchpad command will cause a data collision\r\non the bus if there is more than one slave since multiple\r\ndevices will attempt to transmit data simultaneously.\r\nAlarm Search [ECh]\r\nThe operation of this command is identical to the operation\r\nof the Search ROM command except that only slaves with\r\na set alarm flag will respond. This command allows the\r\nmaster device to determine if any DS18S20s experienced\r\nan alarm condition during the most recent temperature\r\nconversion. After every Alarm Search cycle (i.e., Alarm\r\nSearch command followed by data exchange), the bus\r\nmaster must return to Step 1 (Initialization) in the transaction sequence. See the Operation—Alarm Signaling section for an explanation of alarm flag operation.\r\nDS18S20 Function Commands\r\nAfter the bus master has used a ROM command to\r\naddress the DS18S20 with which it wishes to communicate, the master can issue one of the DS18S20 function\r\ncommands. These commands allow the master to write\r\nto and read from the DS18S20’s scratchpad memory,\r\ninitiate temperature conversions and determine the power\r\nsupply mode. The DS18S20 function commands, which\r\nare described below, are summarized in Table 2 and illustrated by the flowchart in Figure 17.\r\nTable 2. DS18S20 Function Command Set\r\nCOMMAND DESCRIPTION PROTOCOL 1-Wire BUS ACTIVITY AFTER\r\nCOMMAND IS ISSUED NOTES\r\nTEMPERATURE CONVERSION COMMANDS\r\nConvert T Initiates temperature\r\nconversion. 44h\r\nDS18S20 transmits conversion status\r\nto master (not applicable for parasitepowered DS18S20s).\r\n1\r\nMEMORY COMMANDS\r\nRead Scratchpad Reads the entire scratchpad\r\nincluding the CRC byte. BEh DS18S20 transmits up to 9 data\r\nbytes to master. 2\r\nWrite Scratchpad Writes data into scratchpad\r\nbytes 2 and 3 (TH and TL). 4Eh Master transmits 2 data bytes to\r\nDS18S20. 3\r\nCopy Scratchpad Copies TH and TL data from the\r\nscratchpad to EEPROM. 48h None 1\r\nRecall E2 Recalls TH and TL data from\r\nEEPROM to the scratchpad. B8h DS18S20 transmits recall status to\r\nmaster.\r\nRead Power\r\nSupply\r\nSignals DS18S20 power supply\r\nmode to the master. B4h DS18S20 transmits supply status to\r\nmaster.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 11\r\nConvert T [44h]\r\nThis command initiates a single temperature conversion.\r\nFollowing the conversion, the resulting thermal data is\r\nstored in the 2-byte temperature register in the scratchpad memory and the DS18S20 returns to its low-power\r\nidle state. If the device is being used in parasite power\r\nmode, within 10µs (max) after this command is issued the\r\nmaster must enable a strong pullup on the 1-Wire bus for\r\nthe duration of the conversion (tCONV) as described in the\r\nPowering The DS18S20 section. If the DS18S20 is powered by an external supply, the master can issue readtime slots after the Convert T command and the DS18S20\r\nwill respond by transmitting 0 while the temperature conversion is in progress and 1 when the conversion is done.\r\nIn parasite power mode this notification technique cannot\r\nbe used since the bus is pulled high by the strong pullup\r\nduring the conversion.\r\nWrite Scratchpad [4Eh]\r\nThis command allows the master to write 2 bytes of data\r\nto the DS18S20’s scratchpad. The first byte is written into\r\nthe TH register (byte 2 of the scratchpad), and the second\r\nbyte is written into the TL register (byte 3 of the scratchpad). Data must be transmitted least significant bit first.\r\nBoth bytes MUST be written before the master issues a\r\nreset, or the data may be corrupted.\r\nRead Scratchpad [BEh]\r\nThis command allows the master to read the contents of\r\nthe scratchpad. The data transfer starts with the least significant bit of byte 0 and continues through the scratchpad\r\nuntil the 9th byte (byte 8 – CRC) is read. The master may\r\nissue a reset to terminate reading at any time if only part\r\nof the scratchpad data is needed.\r\nCopy Scratchpad [48h]\r\nThis command copies the contents of the scratchpad TH\r\nand TL registers (bytes 2 and 3) to EEPROM. If the device\r\nis being used in parasite power mode, within 10µs (max)\r\nafter this command is issued the master must enable\r\na strong pullup on the 1-Wire bus for at least 10ms as\r\ndescribed in the Powering The DS18S20 section.\r\nRecall E2 [B8h]\r\nThis command recalls the alarm trigger values (TH and\r\nTL) from EEPROM and places the data in bytes 2 and\r\n3, respectively, in the scratchpad memory. The master\r\ndevice can issue read-time slots following the Recall E2\r\ncommand and the DS18S20 will indicate the status of the\r\nrecall by transmitting 0 while the recall is in progress and\r\n1 when the recall is done. The recall operation happens\r\nautomatically at power-up, so valid data is available in\r\nthe scratchpad as soon as power is applied to the device.\r\nRead Power Supply [B4h]\r\nThe master device issues this command followed by a\r\nread-time slot to determine if any DS18S20s on the bus\r\nare using parasite power. During the read-time slot, parasite powered DS18S20s will pull the bus low, and externally powered DS18S20s will let the bus remain high. See\r\nthe Powering The DS18S20 section for usage information\r\nfor this command.\r\n1-Wire Signaling\r\nThe DS18S20 uses a strict 1-Wire communication protocol to ensure data integrity. Several signal types are\r\ndefined by this protocol: reset pulse, presence pulse,\r\nwrite 0, write 1, read 0, and read 1. All these signals, with\r\nthe exception of the presence pulse, are initiated by the\r\nbus master.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 12\r\nInitialization Procedure—Reset And\r\nPresence Pulses\r\nAll communication with the DS18S20 begins with an initialization sequence that consists of a reset pulse from the\r\nmaster followed by a presence pulse from the DS18S20.\r\nThis is illustrated in Figure 12. When the DS18S20 sends\r\nthe presence pulse in response to the reset, it is indicating\r\nto the master that it is on the bus and ready to operate.\r\nDuring the initialization sequence the bus master transmits (Tx) the reset pulse by pulling the 1-Wire bus low\r\nfor a minimum of 480µs. The bus master then releases\r\nthe bus and goes into receive mode (Rx). When the bus\r\nis released, the 5k? pullup resistor pulls the 1-Wire bus\r\nhigh. When the DS18S20 detects this rising edge, it waits\r\n15µs to 60µs and then transmits a presence pulse by pulling the 1-Wire bus low for 60µs to 240µs.\r\nRead/Write Time Slots\r\nThe bus master writes data to the DS18S20 during write\r\ntime slots and reads data from the DS18S20 during readtime slots. One bit of data is transmitted over the 1-Wire\r\nbus per time slot.\r\nWrite Time Slots\r\nThere are two types of write time slots: “Write 1” time slots\r\nand “Write 0” time slots. The bus master uses a Write 1\r\ntime slot to write a logic 1 to the DS18S20 and a Write\r\n0 time slot to write a logic 0 to the DS18S20. All write\r\ntime slots must be a minimum of 60µs in duration with a\r\nminimum of a 1µs recovery time between individual write\r\nslots. Both types of write time slots are initiated by the\r\nmaster pulling the 1-Wire bus low (see Figure 13).\r\nTo generate a Write 1 time slot, after pulling the 1-Wire\r\nbus low, the bus master must release the 1-Wire bus\r\nwithin 15µs. When the bus is released, the 5k? pullup\r\nresistor will pull the bus high. To generate a Write 0 time\r\nslot, after pulling the 1-Wire bus low, the bus master must\r\ncontinue to hold the bus low for the duration of the time\r\nslot (at least 60µs). The DS18S20 samples the 1-Wire\r\nbus during a window that lasts from 15µs to 60µs after the\r\nmaster initiates the write time slot. If the bus is high during\r\nthe sampling window, a 1 is written to the DS18S20. If the\r\nline is low, a 0 is written to the DS18S20.\r\nFigure 12. Initialization Timing\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\nDS18S20 PULLING LOW\r\nRESISTOR PULLUP\r\nGND\r\n1-Wire BUS\r\nDS18S20\r\nWAITS 15-60µs\r\nDS18S20 Tx\r\nPRESENCE PULSE\r\n60-240µs\r\nMASTER Rx\r\n480µs MINIMUM\r\nMASTER Tx RESET PULSE\r\n480µs MINIMUM\r\nVPU\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 13\r\nFigure 13. Read/Write Time Slot Timing Diagram\r\nVPU\r\nGND\r\n1-Wire BUS\r\n1µs < TREC < ?\r\nMIN\r\n> 1µs\r\nMASTER WRITE “0” SLOT MASTER WRITE “1” SLOT\r\nMASTER READ “0” SLOT MASTER READ “1” SLOT\r\nMASTER SAMPLES MASTER SAMPLES\r\nSTART\r\nOF SLOT\r\nSTART\r\nOF SLOT\r\nDS18S20 SAMPLES\r\n> 1µs\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\n60µs < Tx “0” < 120µs\r\nTYP MAX\r\n15µS 15µS 30µS 15µS 15µS 30µS\r\nMIN TYP MAX\r\nDS18S20 SAMPLES\r\n1µs < TREC < ?\r\nVPU\r\nGND\r\n1-Wire BUS\r\n15µs 45µs\r\n> 1µs\r\n15µs\r\nRESISTOR PULLUP\r\nDS18S20 PULLING LOW\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 14\r\nRead-Time Slots\r\nThe DS18S20 can only transmit data to the master when\r\nthe master issues read-time slots. Therefore, the master\r\nmust generate read-time slots immediately after issuing\r\na Read Scratchpad [BEh] or Read Power Supply [B4h]\r\ncommand, so that the DS18S20 can provide the requested data. In addition, the master can generate read-time\r\nslots after issuing Convert T [44h] or Recall E2 [B8h] commands to find out the status of the operation as explained\r\nin the DS18S20 Function Commands section.\r\nAll read-time slots must be a minimum of 60µs in duration\r\nwith a minimum of a 1µs recovery time between slots. A\r\nread-time slot is initiated by the master device pulling the\r\n1-Wire bus low for a minimum of 1µs and then releasing\r\nthe bus (see Figure 13). After the master initiates the\r\nread-time slot, the DS18S20 will begin transmitting a 1\r\nor 0 on bus. The DS18S20 transmits a 1 by leaving the\r\nbus high and transmits a 0 by pulling the bus low. When\r\ntransmitting a 0, the DS18S20 will release the bus by the\r\nend of the time slot, and the bus will be pulled back to\r\nits high idle state by the pullup resister. Output data from\r\nthe DS18S20 is valid for 15µs after the falling edge that\r\ninitiated the read-time slot. Therefore, the master must\r\nrelease the bus and then sample the bus state within\r\n15µs from the start of the slot.\r\nFigure 14 illustrates that the sum of TINIT, TRC, and\r\nTSAMPLE must be less than 15µs for a read-time slot.\r\nFigure 15 shows that system timing margin is maximized\r\nby keeping TINIT and TRC as short as possible and by\r\nlocating the master sample time during read-time slots\r\ntowards the end of the 15µs period.\r\nFigure 14. Detailed Master Read 1 Timing\r\nFigure 15. Recommended Master Read 1 Timing\r\nVPU\r\nGND\r\n1-Wire BUS\r\nMASTER SAMPLES\r\nVIH OF MASTER\r\nTINT > 1µs TRC\r\n15µs\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\nRESISTOR PULLUP\r\nVPU\r\nGND\r\n1-Wire BUS\r\nVIH OF MASTER\r\nTRC =\r\nSMALL\r\nMASTER SAMPLES TINT =\r\nSMALL\r\n15µs\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 15\r\nFigure 16. ROM Commands Flowchart\r\nCCh\r\nSKIP ROM\r\nCOMMAND\r\nMASTER Tx RESET PULSE\r\nDS18S20 Tx PRESENCE PULSE\r\nMASTER Tx ROM COMMAND\r\n33h\r\nREAD ROM\r\nCOMMAND\r\n55h\r\nMATCH ROM\r\nCOMMAND\r\nF0h\r\nSEARCH ROM\r\nCOMMAND\r\nECh\r\nALARM SEARCH\r\nCOMMAND\r\nMASTER Tx\r\nBIT 0\r\nDS18S20 Tx BIT 0\r\nDS18S20 Tx BIT 0\r\nMASTER Tx BIT 0\r\nBIT 0\r\nMATCH?\r\nMASTER Tx\r\nBIT 1\r\nBIT 1\r\nMATCH?\r\nBIT 63\r\nMATCH?\r\nMASTER Tx\r\nBIT 63\r\nN\r\nY Y Y\r\nN\r\nN\r\nY\r\nY\r\nY\r\nDS18S20 Tx BIT 1\r\nMASTER Tx BIT 1\r\nDS18S20 T BIT 63\r\nDS18S20 Tx BIT 63\r\nMASTER Tx BIT 63\r\nBIT 0\r\nMATCH?\r\nBIT 1\r\nMATCH?\r\nBIT 63\r\nMATCH?\r\nN\r\nY\r\nDS18S20 Tx\r\nFAMILY CODE\r\n1 BYTE\r\nDS18S20 Tx\r\nSERIAL NUMBER\r\n6 BYTES\r\nDS18S20 Tx\r\nCRC BYTE\r\nDS18S20 Tx BIT 0\r\nDS18S20 Tx BIT 0\r\nMASTER Tx BIT 0\r\nDEVICE(S)\r\nWITH ALARM\r\nFLAG SET?\r\nINITIALIZATION\r\nSEQUENCE\r\nMASTER Tx FUNCTION\r\nCOMMAND (FIGURE 17)\r\nN\r\nY\r\nN N\r\nY Y\r\nN\r\nY\r\nN N N\r\nY\r\nN\r\nDS18S20 Tx BIT 1\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 16\r\nFigure 17. DS18S20 Function Commands Flowchart\r\nMASTER Tx\r\nFUNCTION\r\nCOMMAND\r\nY\r\nN\r\n44h\r\nCONVERT\r\nTEMPERATURE\r\n?\r\nDS18S20 BEGINS\r\nCONVERSION\r\nDEVICE\r\nCONVERTING\r\nTEMPERATURE\r\n?\r\nN\r\nY\r\nMASTER\r\nRx “0s”\r\nMASTER\r\nRx “1s”\r\nMASTER ENABLES\r\nSTRONG PULLUP ON DQ\r\nDS18S20 CONVERTS\r\nTEMPERATURE\r\nMASTER DISABLES\r\nSTRONG PULLUP\r\nY\r\nN\r\n48h\r\nCOPY\r\nSCRATCHPAD\r\n?\r\nPARASITE\r\nPOWER\r\n?\r\nN\r\nMASTER ENABLES\r\nSTRONG PULL- UP ON DQ\r\nDATA COPIED FROM\r\nSCRATCHPAD TO EEPROM\r\nMASTER DISABLES\r\nSTRONG PULLUP\r\nMASTER\r\nRx “0s”\r\nCOPY IN\r\nPROGRESS\r\n?\r\nY\r\nMASTER\r\nRx “1s”\r\nRETURN TO INITIALIZATION SEQUENCE\r\n(FIGURE 16) FOR NEXT TRANSACTION\r\nB4h READ\r\nPOWER SUPPLY\r\n?\r\nY\r\nN\r\nPARASITE\r\nPOWERED\r\n?\r\nMASTER\r\nRx “1s”\r\nMASTER\r\nRx “0s”\r\nMASTER Tx TH BYTE\r\nTO SCRATCHPAD\r\nY\r\n4Eh\r\nWRITE\r\nSCRATCHPAD\r\n?\r\nMASTER Tx TL BYTE\r\nTO SCRATCHPAD\r\nY\r\nN\r\nY\r\nBEh\r\nREAD\r\nSCRATCH PAD\r\n?\r\nHAVE 8 BYTES\r\nBEEN READ\r\n?\r\nN\r\nMASTER\r\nTx RESET\r\n?\r\nMASTER Rx DATA BYTE\r\nFROM SCRATCHPAD\r\nN\r\nY\r\nMASTER Rx SCRATCHPAD\r\nCRC BYTE\r\nMASTER\r\nRx “1s”\r\nY\r\nN B8h\r\nRECALL E2\r\n?\r\nMASTER BEGINS DATA\r\nRECALL FROM E2 PROM\r\nDEVICE\r\nBUSY RECALLING\r\nDATA\r\n?\r\nN\r\nY\r\nMASTER\r\nRx “0s”\r\nPARASITE\r\nPOWER\r\n?\r\nY Y\r\nN\r\nN Y\r\nN\r\nN\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 17\r\nDs18S20 Operation Example 1\r\nIn this example there are multiple DS18S20s on the bus and they are using parasite power. The bus master initiates a\r\ntemperature conversion in a specific DS18S20 and then reads its scratchpad and recalculates the CRC to verify the data.\r\nDS18S20 Operation Example 2\r\nIn this example there is only one DS18S20 on the bus and it is using parasite power. The master writes to the TH and\r\nTL registers in the DS18S20 scratchpad and then reads the scratchpad and recalculates the CRC to verify the data. The\r\nmaster then copies the scratchpad contents to EEPROM.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20s respond with presence pulse.\r\nTx 55h Master issues Match ROM command.\r\nTx 64-bit ROM code Master sends DS18S20 ROM code.\r\nTx 44h Master issues Convert T command.\r\nTx DQ line held high by\r\nstrong pullup\r\nMaster applies strong pullup to DQ for the duration of the\r\nconversion (tCONV).\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20s respond with presence pulse.\r\nTx 55h Master issues Match ROM command.\r\nTx 64-bit ROM code Master sends DS18S20 ROM code.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then\r\nrecalculates the CRC of the first eight data bytes from the scratchpad\r\nand compares the calculated CRC with the read CRC (byte 9). If they\r\nmatch, the master continues; if not, the read operation is repeated.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 4Eh Master issues Write Scratchpad command.\r\nTx 2 data bytes Master sends two data bytes to scratchpad (TH and TL)\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then\r\nrecalculates the CRC of the first eight data bytes from the scratchpad\r\nand compares the calculated CRC with the read CRC (byte 9). If they\r\nmatch, the master continues; if not, the read operation is repeated.\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 48h Master issues Copy Scratchpad command.\r\nTx DQ line held high by\r\nstrong pullup\r\nMaster applies strong pullup to DQ for at least 10ms while copy\r\noperation is in progress.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 18\r\nDS18S20 Operation Example 3\r\nIn this example there is only one DS18S20 on the bus and it is using parasite power. The bus master initiates a temperature conversion then reads the DS18S20 scratchpad and calculates a higher resolution result using the data from the\r\ntemperature, COUNT REMAIN and COUNT PER °C registers.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nTx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 44h Master issues Convert T command.\r\nTx DQ line held high by\r\nstrong pullup Master applies strong pullup to DQ for the duration of the conversion (tCONV).\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then recalculates\r\nthe CRC of the first eight data bytes from the scratchpad and compares\r\nthe calculated CRC with the read CRC (byte 9). If they match, the master\r\ncontinues; if not, the read operation is repeated. The master also calculates\r\nthe TEMP_READ value and stores the contents of the COUNT REMAIN and\r\nCount Per °C registers.\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\n— — CPU calculates extended resolution temperature using the equation in\r\nthe Operation—Measuring Temperature section.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 19\r\n+Denotes a lead(Pb)-free/RoHS-compliant package. A “+”\r\nappears on the top mark of lead(Pb)-free packages.\r\nT&R = Tape and reel.\r\n*TO-92 packages in tape and reel can be ordered with straight\r\nor formed leads. Choose “SL” for straight leads. Bulk TO-92\r\norders are straight leads only.\r\nPART TEMP RANGE PIN-PACKAGE\r\nDS18S20+ –55°C to +125°C 3 TO-92\r\nDS18S20+T&R –55°C to +125°C 3 TO-92 (2000 Piece)\r\nDS18S20-SL+T&R –55°C to +125°C 3 TO-92 (2000 Piece)*\r\nDS18S20Z –55°C to +125°C 8 SO\r\nDS18S20Z+ –55°C to +125°C 8 SO\r\nDS18S20Z/T&R –55°C to +125°C 8 SO (2500 Piece)\r\nDS18S20Z+T&R –55°C to +125°C 8 SO (2500 Piece)\r\nPACKAGE\r\nTYPE\r\nPACKAGE\r\nCODE\r\nOUTLINE\r\nNO.\r\nLAND\r\nPATTERN NO.\r\n8 SO S8-2 21-0041 90-0096\r\n3 TO-92\r\n(straight leads) Q3-1 21-0248 —\r\n3 TO-92\r\n(formed leads) Q3-4 21-0250 —\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 20\r\nOrdering Information Package Information\r\nFor the latest package outline information and land patterns\r\n(footprints), go to www.maximintegrated.com/packages. Note\r\nthat a “+”, “#”, or “-” in the package code indicates RoHS status\r\nonly. Package drawings may show a different suffix character, but\r\nthe drawing pertains to the package regardless of RoHS status.\r\nREVISION\r\nNUMBER\r\nREVISION\r\nDATE DESCRIPTION PAGES\r\nCHANGED\r\n0 4/08\r\nIn the Ordering Information table, added TO-92 straight-lead packages and\r\nincluded a note that the TO-92 package in tape and reel can be ordered with either\r\nformed or straight leads\r\n2\r\n1 8/10\r\nRemoved the Top Mark column from the Ordering Information table; added the\r\ncontinuous power dissipation and lead and soldering temperatures to the Absolute\r\nMaximum Ratings section\r\n2, 20\r\n2 1/15 Updated General Description and Benefits and Features section and added\r\nApplications section 1\r\n3 4/15 Revised Pin Configuration and Ordering Information 1, 20\r\nMaxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent licenses\r\nare implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits)\r\nshown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.\r\nMaxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc. © 2015 Maxim Integrated Products, Inc. ? 21\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nRevision History\r\nFor pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.', 'Thermomètre', 8, 654987);
INSERT INTO `catalogue` (`idCatalogue`, `datasheet`, `nom`, `prix`, `reference`) VALUES
(3, 'Pin Configurations\r\nGeneral Description\r\nThe DS18S20 digital thermometer provides 9-bit Celsius\r\ntemperature measurements and has an alarm function\r\nwith nonvolatile user-programmable upper and lower trigger points. The DS18S20 communicates over a 1-Wire\r\nbus that by definition requires only one data line (and\r\nground) for communication with a central microprocessor.\r\nIn addition, the DS18S20 can derive power directly from\r\nthe data line (“parasite power”), eliminating the need for\r\nan external power supply.\r\nEach DS18S20 has a unique 64-bit serial code, which\r\nallows multiple DS18S20s to function on the same 1-Wire\r\nbus. Thus, it is simple to use one microprocessor to\r\ncontrol many DS18S20s distributed over a large area.\r\nApplications that can benefit from this feature include\r\nHVAC environmental controls, temperature monitoring\r\nsystems inside buildings, equipment, or machinery, and\r\nprocess monitoring and control systems.\r\nApplications\r\n? Thermostatic Controls\r\n? Industrial Systems\r\n? Consumer Products\r\n? Thermometers\r\n? Thermally Sensitive Systems\r\nBenefits and Features\r\n? Unique 1-Wire® Interface Requires Only One Port\r\nPin for Communication\r\n? Maximize System Accuracy in Broad Range of\r\nThermal Management Applications\r\n• Measures Temperatures from -55°C to +125°C\r\n(-67°F to +257°F)\r\n• ±0.5°C Accuracy from -10°C to +85°C\r\n• 9-Bit Resolution\r\n• No External Components Required\r\n? Parasite Power Mode Requires Only 2 Pins for\r\nOperation (DQ and GND)\r\n? Simplifies Distributed Temperature-Sensing\r\nApplications with Multidrop Capability\r\n• Each Device Has a Unique 64-Bit Serial Code\r\nStored in On-Board ROM\r\n? Flexible User-Definable Nonvolatile (NV) Alarm Settings\r\nwith Alarm Search Command Identifies Devices with\r\nTemperatures Outside Programmed Limits\r\n? Available in 8-Pin SO (150 mils) and 3-Pin TO-92\r\nPackages\r\nOrdering Information appears at end of data sheet.\r\n1-Wire is a registered trademark of Maxim Integrated Products, Inc.\r\n19-5474; Rev 3; 4/15\r\nBOTTOM VIEW\r\n2\r\nN.C.\r\nN.C.\r\nVDD\r\nDQ\r\nN.C.\r\nN.C.\r\nN.C.\r\nGND\r\nDS18S20\r\nSO (150 mils)\r\n(DS18S20Z)\r\n+ 1\r\n4\r\n3\r\n7\r\n8\r\n5\r\n6\r\nDS18S20\r\n1 2 3\r\nGND DQ VDD\r\n1\r\n1 2 3\r\nTOP VIEW\r\nTO-92\r\n(DS18S20)\r\nDS18S20 High-Precision 1-Wire Digital Thermometer \r\nVoltage Range on Any Pin Relative to Ground....-0.5V to +6.0V\r\nContinuous Power Dissipation (TA = +70°C)\r\n8-Pin SO (derate 5.9mW/°C above +70°C)..............470.6mW\r\n3-Pin TO-92 (derate 6.3mW/°C above +70°C)............500mW\r\nOperating Temperature Range......................... -55°C to +125°C\r\nStorage Temperature Range............................ -55°C to +125°C\r\nLead Temperature (soldering, 10s) .................................+260°C\r\nSoldering Temperature (reflow)\r\nLead(Pb)-free...............................................................+260°C\r\nContaining lead(Pb).....................................................+240°C\r\nNote 1: All voltages are referenced to ground.\r\nNote 2: The Pullup Supply Voltage specification assumes that the pullup device is ideal, and therefore the high level of the pullup is equal to VPU. In order to meet the VIH spec of the DS18S20, the actual supply rail for the strong pullup transistor\r\nmust include margin for the voltage drop across the transistor when it is turned on; thus: VPU_ACTUAL = VPU_IDEAL +\r\nVTRANSISTOR.\r\nNote 3: See typical performance curve in Figure 1.\r\nNote 4: Logic-low voltages are specified at a sink current of 4mA.\r\nNote 5: To guarantee a presence pulse under low voltage parasite power conditions, VILMAX may have to be reduced to as\r\nlow as 0.5V.\r\nNote 6: Logic-high voltages are specified at a source current of 1mA.\r\nNote 7: Standby current specified up to +70°C. Standby current typically is 3µA at +125°C.\r\nNote 8: To minimize IDDS, DQ should be within the following ranges: GND ? DQ ? GND + 0.3V or VDD – 0.3V ? DQ ? VDD.\r\nNote 9: Active current refers to supply current during active temperature conversions or EEPROM writes.\r\nNote 10: DQ line is high (“high-Z” state).\r\nNote 11: Drift data is based on a 1000-hour stress test at +125°C with VDD = 5.5V.\r\n(VDD = 3.0V to 5.5V, TA = -55°C to +125°C, unless otherwise noted.)\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nSupply Voltage VDD Local Power (Note 1) +3.0 +5.5 V\r\nPullup Supply Voltage VPU\r\nParasite Power\r\n(Note 1, 2)\r\n+3.0 +5.5\r\nV\r\nLocal Power +3.0 VDD\r\nThermometer Error tERR\r\n-10°C to +85°C\r\n(Note 3)\r\n±0.5\r\n°C\r\n-55°C to +125°C ±2\r\nInput Logic-Low VIL (Note 1, 4, 5) -0.3 +0.8 V\r\nInput Logic-High VIH\r\nLocal Power\r\n(Note 1, 6)\r\n+2.2 The lower of\r\n5.5 or VDD\r\n+ 0.3\r\nV\r\nParasite Power +3.0\r\nSink Current IL VI/O = 0.4V (Note 1) 4.0 mA\r\nStandby Current IDDS (Note 7, 8) 750 1000 nA\r\nActive Current IDD VDD = 5V (Note 9) 1 1.5 mA\r\nDQ Input Current IDQ (Note 10) 5 µA\r\nDrift (Note 11) ±0.2 °C\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 2\r\nAbsolute Maximum Ratings\r\nThese are stress ratings only and functional operation of the device at these or any other conditions above those indicated in the operation sections of this specification is not implied. Exposure\r\nto absolute maximum rating conditions for extended periods of time may affect reliability.\r\nDC Electrical Characteristics\r\n(VDD = 3.0V to 5.5V, TA = -55°C to +100°C, unless otherwise noted.)\r\n(VDD = 3.0V to 5.5V; TA = -55°C to +125°C, unless otherwise noted.)\r\nNote 12: See the timing diagrams in Figure 2.\r\nNote 13: Under parasite power, if tRSTL > 960µs, a power-on reset may occur.\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nNV Write Cycle Time tWR 2 10 ms\r\nEEPROM Writes NEEWR -55°C to +55°C 50k writes\r\nEEPROM Data Retention tEEDR -55°C to +55°C 10 years\r\nPARAMETER SYMBOL CONDITIONS MIN TYP MAX UNITS\r\nTemperature Conversion Time tCONV (Note 12) 750 ms\r\nTime to Strong Pullup On tSPON Start Convert T Command Issued 10 µs\r\nTime Slot tSLOT (Note 12) 60 120 µs\r\nRecovery Time tREC (Note 12) 1 µs\r\nWrite 0 Low Time tLOW0 (Note 12) 60 120 µs\r\nWrite 1 Low Time tLOW1 (Note 12) 1 15 µs\r\nRead Data Valid tRDV (Note 12) 15 µs\r\nReset Time High tRSTH (Note 12) 480 µs\r\nReset Time Low tRSTL (Note 12, 13) 480 µs\r\nPresence-Detect High tPDHIGH (Note 12) 15 60 µs\r\nPresence-Detect Low tPDLOW (Note 12) 60 240 µs\r\nCapacitance CIN/OUT 25 pF\r\nFigure 1. Typical Performance Curve\r\nDS18S20 TYPICAL ERROR CURVE\r\n0.5\r\n0.4\r\n0.3\r\n0.2\r\n0.1\r\n0\r\n-0.1\r\n-0.2\r\n-0.3\r\n-0.4\r\n-0.5\r\nTHERMOMETER ERROR (°C)\r\n0 10 20 30 40 50 60 70\r\nTEMPERATURE (°C)\r\n+3s ERROR\r\nMEAN ERROR\r\n-3s ERROR\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 3\r\nAC Electrical Characteristics—NV Memory\r\nAC Electrical Characteristics\r\nPIN\r\nNAME FUNCTION\r\nTO-92 SO\r\n1 5 GND Ground\r\n2 4 DQ Data Input/Output. Open-drain 1-Wire interface pin. Also provides power to the\r\ndevice when used in parasite power mode (see the Powering the DS18S20 section.)\r\n3 3 VDD Optional VDD. VDD must be grounded for operation in parasite power mode.\r\n— 1, 2, 6, 7, 8 N.C. No Connection\r\nFigure 2. Timing Diagrams\r\nSTART OF NEXT CYCLE\r\n1-Wire WRITE ZERO TIME SLOT\r\ntREC\r\ntSLOT\r\ntLOW0\r\n1-Wire READ ZERO TIME SLOT\r\ntREC\r\ntSLOT START OF NEXT CYCLE\r\ntRDV\r\n1-Wire RESET PULSE\r\n1-Wire PRESENCE DETECT\r\ntRSTL tRSTH\r\ntPDHIGH\r\nPRESENCE DETECT\r\ntPDLOW\r\nRESET PULSE FROM HOST\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 4\r\nPin Description\r\nOverview\r\nFigure 3 shows a block diagram of the DS18S20, and\r\npin descriptions are given in the Pin Description table.\r\nThe 64-bit ROM stores the device’s unique serial code.\r\nThe scratchpad memory contains the 2-byte temperature\r\nregister that stores the digital output from the temperature\r\nsensor. In addition, the scratchpad provides access to the\r\n1-byte upper and lower alarm trigger registers (TH and\r\nTL). The TH and TL registers are nonvolatile (EEPROM),\r\nso they will retain data when the device is powered down.\r\nThe DS18S20 uses Maxim’s exclusive 1-Wire bus protocol that implements bus communication using one control\r\nsignal. The control line requires a weak pullup resistor\r\nsince all devices are linked to the bus via a 3-state or\r\nopen-drain port (the DQ pin in the case of the DS18S20).\r\nIn this bus system, the microprocessor (the master\r\ndevice) identifies and addresses devices on the bus\r\nusing each device’s unique 64-bit code. Because each\r\ndevice has a unique code, the number of devices that\r\ncan be addressed on one bus is virtually unlimited. The\r\n1-Wire bus protocol, including detailed explanations of the\r\ncommands and “time slots,” is covered in the 1-Wire Bus\r\nSystem section.\r\nAnother feature of the DS18S20 is the ability to operate\r\nwithout an external power supply. Power is instead supplied through the 1-Wire pullup resistor via the DQ pin\r\nwhen the bus is high. The high bus signal also charges an\r\ninternal capacitor (CPP), which then supplies power to the\r\ndevice when the bus is low. This method of deriving power\r\nfrom the 1-Wire bus is referred to as “parasite power.” As\r\nan alternative, the DS18S20 may also be powered by an\r\nexternal supply on VDD.\r\nOperation—Measuring Temperature\r\nThe core functionality of the DS18S20 is its direct-to-digital temperature sensor. The temperature sensor output\r\nhas 9-bit resolution, which corresponds to 0.5°C steps.\r\nThe DS18S20 powers-up in a low-power idle state; to\r\ninitiate a temperature measurement and A-to-D conversion, the master must issue a Convert T [44h] command.\r\nFollowing the conversion, the resulting thermal data is\r\nstored in the 2-byte temperature register in the scratchpad memory and the DS18S20 returns to its idle state.\r\nIf the DS18S20 is powered by an external supply, the\r\nmaster can issue “read-time slots” (see the 1-Wire Bus\r\nSystem section) after the Convert T command and the\r\nDS18S20 will respond by transmitting 0 while the temperature conversion is in progress and 1 when the conversion is done. If the DS18S20 is powered with parasite\r\npower, this notification technique cannot be used since\r\nthe bus must be pulled high by a strong pullup during the\r\nentire temperature conversion. The bus requirements for\r\nparasite power are explained in detail in the Powering The\r\nDS18S20 section.\r\nFigure 3. DS18S20 Block Diagram\r\nVPU\r\n64-BIT ROM\r\nAND\r\n1-Wire PORT\r\nDQ\r\nVDD\r\nINTERNAL VDD\r\nCPP\r\nPARASITE POWER CIRCUIT MEMORY\r\nCONTROL LOGIC\r\nSCRATCHPAD\r\n8-BIT CRC\r\nGENERATOR\r\nTEMPERATURE\r\nSENSOR\r\nALARM HIGH TRIGGER (TH)\r\nREGISTER (EEPROM)\r\nALARM LOW TRIGGER (TL)\r\nREGISTER (EEPROM)\r\nGND\r\nDS18S20 4.7k?\r\nPOWERSUPPLY SENSE\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 5\r\nThe DS18S20 output data is calibrated in degrees centigrade; for Fahrenheit applications, a lookup table or\r\nconversion routine must be used. The temperature data is\r\nstored as a 16-bit sign-extended two’s complement number in the temperature register (see Figure 4). The sign\r\nbits (S) indicate if the temperature is positive or negative:\r\nfor positive numbers S = 0 and for negative numbers S =\r\n1. Table 1 gives examples of digital output data and the\r\ncorresponding temperature reading.\r\nResolutions greater than 9 bits can be calculated using the\r\ndata from the temperature, COUNT REMAIN and COUNT\r\nPER °C registers in the scratchpad. Note that the COUNT\r\nPER °C register is hard-wired to 16 (10h). After reading\r\nthe scratchpad, the TEMP_READ value is obtained by\r\ntruncating the 0.5°C bit (bit 0) from the temperature data\r\n(see Figure 4). The extended resolution temperature can\r\nthen be calculated using the following equation:\r\nTEMPERATURE TEMP_READ 0.25\r\nCOUNT_PER_C COUNT_REMAIN\r\nCOUNT_PER_C\r\n= ?\r\n? +\r\nOperation—Alarm Signaling\r\nAfter the DS18S20 performs a temperature conversion,\r\nthe temperature value is compared to the user-defined\r\ntwo’s complement alarm trigger values stored in the\r\n1-byte TH and TL registers (see Figure 5). The sign bit (S)\r\nindicates if the value is positive or negative: for positive\r\nnumbers S = 0 and for negative numbers S = 1. The TH\r\nand TL registers are nonvolatile (EEPROM) so they will\r\nretain data when the device is powered down. TH and TL\r\ncan be accessed through bytes 2 and 3 of the scratchpad\r\nas explained in the Memory section.\r\nOnly bits 8 through 1 of the temperature register are used\r\nin the TH and TL comparison since TH and TL are 8-bit\r\nregisters. If the measured temperature is lower than or\r\nequal to TL or higher than TH, an alarm condition exists\r\nand an alarm flag is set inside the DS18S20. This flag is\r\nupdated after every temperature measurement; therefore,\r\nif the alarm condition goes away, the flag will be turned off\r\nafter the next temperature conversion.\r\nTable 1. Temperature/Data Relationship\r\n*The power-on reset value of the temperature register is +85°C.\r\nTEMPERATURE (°C) DIGITAL OUTPUT (BINARY) DIGITAL OUTPUT (HEX)\r\n+85.0* 0000 0000 1010 1010 00AAh\r\n+25.0 0000 0000 0011 0010 0032h\r\n+0.5 0000 0000 0000 0001 0001h\r\n0 0000 0000 0000 0000 0000h\r\n-0.5 1111 1111 1111 1111 FFFFh\r\n-25.0 1111 1111 1100 1110 FFCEh\r\n-55.0 1111 1111 1001 0010 FF92h\r\nFigure 4. Temperature Register Format\r\nFigure 5. TH and TL Register Format\r\nBIT 7 BIT 6 BIT 5 BIT 4 BIT 3 BIT 2 BIT 1 BIT 0\r\nLS BYTE 26 25 24 23 22 21 20 2-1\r\nBIT 15 BIT 14 BIT 13 BIT 12 BIT 11 BIT 10 BIT 9 BIT 8\r\nMS BYTE S S S S S S S S\r\nS = SIGN\r\nBIT 7 BIT 6 BIT 5 BIT 4 BIT 3 BIT 2 BIT 1 BIT 0\r\nS 26 25 25 25 22 21 20\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 6\r\nThe master device can check the alarm flag status of\r\nall DS18S20s on the bus by issuing an Alarm Search\r\n[ECh] command. Any DS18S20s with a set alarm flag will\r\nrespond to the command, so the master can determine\r\nexactly which DS18S20s have experienced an alarm\r\ncondition. If an alarm condition exists and the TH or TL\r\nsettings have changed, another temperature conversion\r\nshould be done to validate the alarm condition.\r\nPowering The DS18S20\r\nThe DS18S20 can be powered by an external supply on\r\nthe VDD pin, or it can operate in “parasite power” mode,\r\nwhich allows the DS18S20 to function without a local\r\nexternal supply. Parasite power is very useful for applications that require remote temperature sensing or those\r\nwith space constraints. Figure 3 shows the DS18S20’s\r\nparasite-power control circuitry, which “steals” power from\r\nthe 1-Wire bus via the DQ pin when the bus is high. The\r\nstolen charge powers the DS18S20 while the bus is high,\r\nand some of the charge is stored on the parasite power\r\ncapacitor (CPP) to provide power when the bus is low.\r\nWhen the DS18S20 is used in parasite power mode, the\r\nVDD pin must be connected to ground.\r\nIn parasite power mode, the 1-Wire bus and CPP can\r\nprovide sufficient current to the DS18S20 for most operations as long as the specified timing and voltage requirements are met (see the DC Electrical Characteristics\r\nand the AC Electrical Characteristics). However, when\r\nthe DS18S20 is performing temperature conversions or\r\ncopying data from the scratchpad memory to EEPROM,\r\nthe operating current can be as high as 1.5mA. This\r\ncurrent can cause an unacceptable voltage drop across\r\nthe weak 1-Wire pullup resistor and is more current than\r\ncan be supplied by CPP. To assure that the DS18S20\r\nhas sufficient supply current, it is necessary to provide a\r\nstrong pullup on the 1-Wire bus whenever temperature\r\nconversions are taking place or data is being copied from\r\nthe scratchpad to EEPROM. This can be accomplished\r\nby using a MOSFET to pull the bus directly to the rail\r\nas shown in Figure 6. The 1-Wire bus must be switched\r\nto the strong pullup within 10µs (max) after a Convert T\r\n[44h] or Copy Scratchpad [48h] command is issued, and\r\nthe bus must be held high by the pullup for the duration\r\nof the conversion (tCONV) or data transfer (tWR = 10ms).\r\nNo other activity can take place on the 1-Wire bus while\r\nthe pullup is enabled.\r\nThe DS18S20 can also be powered by the conventional\r\nmethod of connecting an external power supply to the\r\nVDD pin, as shown in Figure 7. The advantage of this\r\nmethod is that the MOSFET pullup is not required, and\r\nthe 1-Wire bus is free to carry other traffic during the temperature conversion time.\r\nThe use of parasite power is not recommended for temperatures above 100°C since the DS18S20 may not be\r\nable to sustain communications due to the higher leakage currents that can exist at these temperatures. For\r\napplications in which such temperatures are likely, it is\r\nstrongly recommended that the DS18S20 be powered by\r\nan external power supply.\r\nIn some situations the bus master may not know whether\r\nthe DS18S20s on the bus are parasite powered or powered by external supplies. The master needs this information to determine if the strong bus pullup should be used\r\nduring temperature conversions. To get this information,\r\nthe master can issue a Skip ROM [CCh] command followed by a Read Power Supply [B4h] command followed\r\nby a “read-time slot”. During the read-time slot, parasite\r\npowered DS18S20s will pull the bus low, and externally\r\npowered DS18S20s will let the bus remain high. If the\r\nbus is pulled low, the master knows that it must supply\r\nthe strong pullup on the 1-Wire bus during temperature\r\nconversions.\r\nFigure 6. Supplying the Parasite-Powered DS18S20 During\r\nTemperature Conversions\r\nFigure 7. Powering the DS18S20 with an External Supply\r\nVPU\r\n4.7k?\r\nVPU\r\n1-Wire BUS\r\nDS18S20\r\nGND DQ VDD\r\nTO OTHER\r\n1-Wire DEVICES\r\nµP\r\nVDD\r\n(EXTERNAL SUPPLY)\r\nVPU\r\n4.7k?\r\n1-Wire BUS\r\nDS18S20\r\nGND DQ VDD\r\nTO OTHER\r\n1-Wire DEVICES\r\nµP\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 7\r\n64-Bit Lasered ROM Code\r\nEach DS18S20 contains a unique 64-bit code (see\r\nFigure 8) stored in ROM. The least significant 8 bits of the\r\nROM code contain the DS18S20’s 1-Wire family code:\r\n10h. The next 48 bits contain a unique serial number.\r\nThe most significant 8 bits contain a cyclic redundancy\r\ncheck (CRC) byte that is calculated from the first 56 bits\r\nof the ROM code. A detailed explanation of the CRC bits\r\nis provided in the CRC Generation section. The 64-bit\r\nROM code and associated ROM function control logic\r\nallow the DS18S20 to operate as a 1-Wire device using\r\nthe protocol detailed in the 1-Wire Bus System section.\r\nMemory\r\nThe DS18S20’s memory is organized as shown in\r\nFigure 9. The memory consists of an SRAM scratchpad with nonvolatile EEPROM storage for the high and\r\nlow alarm trigger registers (TH and TL). Note that if the\r\nDS18S20 alarm function is not used, the TH and TL registers can serve as general-purpose memory. All memory commands are described in detail in the DS18S20\r\nFunction Commands section.\r\nByte 0 and byte 1 of the scratchpad contain the LSB and\r\nthe MSB of the temperature register, respectively. These\r\nbytes are read-only. Bytes 2 and 3 provide access to TH\r\nand TL registers. Bytes 4 and 5 are reserved for internal\r\nuse by the device and cannot be overwritten; these bytes\r\nwill return all 1s when read. Bytes 6 and 7 contain the\r\nCOUNT REMAIN and COUNT PER ºC registers, which\r\ncan be used to calculate extended resolution results as\r\nexplained in the Operation—Measuring Temperature\r\nsection.\r\nByte 8 of the scratchpad is read-only and contains the\r\nCRC code for bytes 0 through 7 of the scratchpad.\r\nThe DS18S20 generates this CRC using the method\r\ndescribed in the CRC Generation section.\r\nData is written to bytes 2 and 3 of the scratchpad using\r\nthe Write Scratchpad [4Eh] command; the data must be\r\ntransmitted to the DS18S20 starting with the least significant bit of byte 2. To verify data integrity, the scratchpad\r\ncan be read (using the Read Scratchpad [BEh] command)\r\nafter the data is written. When reading the scratchpad,\r\ndata is transferred over the 1-Wire bus starting with the\r\nleast significant bit of byte 0. To transfer the TH and TL\r\ndata from the scratchpad to EEPROM, the master must\r\nissue the Copy Scratchpad [48h] command.\r\nFigure 8. 64-Bit Lasered ROM Code\r\nFigure 9. DS18S20 Memory Map\r\n8-BIT CRC 48-BIT SERIAL NUMBER 8-BIT FAMILY CODE (10h)\r\nMSB LSB MSB LSB MSB LSB\r\nBYTE 0\r\nBYTE 1\r\nTEMPERATURE LSB (AAh)\r\nTEMPERATURE MSB (00h) (85°C)\r\nBYTE 2\r\nBYTE 3\r\nTH REGISTER OR USER BYTE 1*\r\nTL REGISTER OR USER BYTE 2*\r\nBYTE 4\r\nBYTE 5\r\nRESERVED (FFh)\r\nRESERVED (FFh)\r\nBYTE 6\r\nBYTE 7\r\nCOUNT REMAIN (0Ch)\r\nCOUNT PER °C (10h)\r\nBYTE 8 CRC*\r\n*POWER-UP STATE DEPENDS ON VALUE(S) STORED IN EEPROM.\r\nTH REGISTER OR USER BYTE 1\r\nTL REGISTER OR USER BYTE 2\r\nSCRATCHPAD\r\n(POWER-UP STATE)\r\nEEPROM\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 8\r\nData in the EEPROM registers is retained when the\r\ndevice is powered down; at power-up the EEPROM data\r\nis reloaded into the corresponding scratchpad locations.\r\nData can also be reloaded from EEPROM to the scratchpad at any time using the Recall E2 [B8h] command.\r\nThe master can issue “read-time slots” (see the 1-Wire\r\nBus System section) following the Recall E2 command\r\nand the DS18S20 will indicate the status of the recall by\r\ntransmitting 0 while the recall is in progress and 1 when\r\nthe recall is done.\r\nCRC Generation\r\nCRC bytes are provided as part of the DS18S20’s 64-bit\r\nROM code and in the 9th byte of the scratchpad memory.\r\nThe ROM code CRC is calculated from the first 56 bits\r\nof the ROM code and is contained in the most significant\r\nbyte of the ROM. The scratchpad CRC is calculated from\r\nthe data stored in the scratchpad, and therefore it changes when the data in the scratchpad changes. The CRCs\r\nprovide the bus master with a method of data validation\r\nwhen data is read from the DS18S20. To verify that data\r\nhas been read correctly, the bus master must re-calculate\r\nthe CRC from the received data and then compare this\r\nvalue to either the ROM code CRC (for ROM reads) or\r\nto the scratchpad CRC (for scratchpad reads). If the calculated CRC matches the read CRC, the data has been\r\nreceived error free. The comparison of CRC values and\r\nthe decision to continue with an operation are determined\r\nentirely by the bus master. There is no circuitry inside the\r\nDS18S20 that prevents a command sequence from proceeding if the DS18S20 CRC (ROM or scratchpad) does\r\nnot match the value generated by the bus master.\r\nThe equivalent polynomial function of the CRC (ROM or\r\nscratchpad) is:\r\nCRC = X8 + X5 + X4 + 1\r\nThe bus master can re-calculate the CRC and compare it\r\nto the CRC values from the DS18S20 using the polynomial generator shown in Figure 10. This circuit consists\r\nof a shift register and XOR gates, and the shift register\r\nbits are initialized to 0. Starting with the least significant\r\nbit of the ROM code or the least significant bit of byte 0\r\nin the scratchpad, one bit at a time should shifted into the\r\nshift register. After shifting in the 56th bit from the ROM or\r\nthe most significant bit of byte 7 from the scratchpad, the\r\npolynomial generator will contain the re-calculated CRC.\r\nNext, the 8-bit ROM code or scratchpad CRC from the\r\nDS18S20 must be shifted into the circuit. At this point, if\r\nthe re-calculated CRC was correct, the shift register will\r\ncontain all 0s. Additional information about the Maxim\r\n1-Wire cyclic redundancy check is available in Application\r\nNote 27: Understanding and Using Cyclic Redundancy\r\nChecks with Maxim ?Button Products.\r\n1-Wire Bus System\r\nThe 1-Wire bus system uses a single bus master to control one or more slave devices. The DS18S20 is always a\r\nslave. When there is only one slave on the bus, the system is referred to as a “single-drop” system; the system is\r\n“multidrop” if there are multiple slaves on the bus.\r\nAll data and commands are transmitted least significant\r\nbit first over the 1-Wire bus.\r\nThe following discussion of the 1-Wire bus system is\r\nbroken down into three topics: hardware configuration,\r\ntransaction sequence, and 1-Wire signaling (signal types\r\nand timing).\r\nFigure 10. CRC Generator\r\n(MSB) (LSB)\r\nXOR XOR XOR\r\nINPUT\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 9\r\nHardware Configuration\r\nThe 1-Wire bus has by definition only a single data line.\r\nEach device (master or slave) interfaces to the data line via\r\nan open drain or 3-state port. This allows each device to\r\n“release” the data line when the device is not transmitting\r\ndata so the bus is available for use by another device. The\r\n1-Wire port of the DS18S20 (the DQ pin) is open drain with\r\nan internal circuit equivalent to that shown in Figure 11.\r\nThe 1-Wire bus requires an external pullup resistor of\r\napproximately 5k?; thus, the idle state for the 1-Wire\r\nbus is high. If for any reason a transaction needs to be\r\nsuspended, the bus MUST be left in the idle state if the\r\ntransaction is to resume. Infinite recovery time can occur\r\nbetween bits so long as the 1-Wire bus is in the inactive\r\n(high) state during the recovery period. If the bus is held\r\nlow for more than 480µs, all components on the bus will\r\nbe reset.\r\nTransaction Sequence\r\nThe transaction sequence for accessing the DS18S20 is\r\nas follows:\r\nStep 1. Initialization\r\nStep 2. ROM Command (followed by any required data\r\nexchange)\r\nStep 3. DS18S20 Function Command (followed by any\r\nrequired data exchange)\r\nIt is very important to follow this sequence every time the\r\nDS18S20 is accessed, as the DS18S20 will not respond\r\nif any steps in the sequence are missing or out of order.\r\nExceptions to this rule are the Search ROM [F0h] and\r\nAlarm Search [ECh] commands. After issuing either of\r\nthese ROM commands, the master must return to Step 1\r\nin the sequence.\r\nInitialization\r\nAll transactions on the 1-Wire bus begin with an initialization sequence. The initialization sequence consists of a\r\nreset pulse transmitted by the bus master followed by\r\npresence pulse(s) transmitted by the slave(s). The presence pulse lets the bus master know that slave devices\r\n(such as the DS18S20) are on the bus and are ready\r\nto operate. Timing for the reset and presence pulses is\r\ndetailed in the 1-Wire Signaling section.\r\nROM Commands\r\nAfter the bus master has detected a presence pulse, it\r\ncan issue a ROM command. These commands operate\r\non the unique 64-bit ROM codes of each slave device and\r\nallow the master to single out a specific device if many\r\nare present on the 1-Wire bus. These commands also\r\nallow the master to determine how many and what types\r\nof devices are present on the bus or if any device has\r\nexperienced an alarm condition. There are five ROM commands, and each command is 8 bits long. The master\r\ndevice must issue an appropriate ROM command before\r\nissuing a DS18S20 function command. A flowchart for\r\noperation of the ROM commands is shown in Figure 16.\r\nSearch Rom [F0h]\r\nWhen a system is initially powered up, the master must\r\nidentify the ROM codes of all slave devices on the bus,\r\nwhich allows the master to determine the number of\r\nslaves and their device types. The master learns the ROM\r\ncodes through a process of elimination that requires the\r\nmaster to perform a Search ROM cycle (i.e., Search ROM\r\ncommand followed by data exchange) as many times as\r\nnecessary to identify all of the slave devices. If there is\r\nonly one slave on the bus, the simpler Read ROM command (see below) can be used in place of the Search\r\nROM process. For a detailed explanation of the Search\r\nROM procedure, refer to the ?Button® Book of Standards\r\nat www.maximintegrated.com/ibuttonbook. After every\r\nSearch ROM cycle, the bus master must return to Step 1\r\n(Initialization) in the transaction sequence.\r\nRead ROM [33h]\r\nThis command can only be used when there is one slave\r\non the bus. It allows the bus master to read the slave’s\r\n64-bit ROM code without using the Search ROM procedure. If this command is used when there is more than\r\none slave present on the bus, a data collision will occur\r\nwhen all the slaves attempt to respond at the same time.\r\n?Button is a registered trademark of Maxim Integrated Products, Inc.\r\nFigure 11. Hardware Configuration\r\nDQ\r\nVPU\r\n4.7k? DS18S20\r\n1-Wire PORT\r\nRx\r\nTx\r\n100?\r\nMOSFET\r\n5µA\r\nTYP\r\nRx 1-Wire BUS\r\nTx\r\nRx = RECEIVE\r\nTx = TRANSMIT\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 10\r\nNote 1: For parasite-powered DS18S20s, the master must enable a strong pullup on the 1-Wire bus during temperature conversions and copies from the scratchpad to EEPROM. No other bus activity may take place during this time.\r\nNote 2: The master can interrupt the transmission of data at any time by issuing a reset.\r\nNote 3: Both bytes must be written before a reset is issued.\r\nMatch ROM [55h]\r\nThe match ROM command followed by a 64-bit ROM\r\ncode sequence allows the bus master to address a\r\nspecific slave device on a multidrop or single-drop bus.\r\nOnly the slave that exactly matches the 64-bit ROM code\r\nsequence will respond to the function command issued\r\nby the master; all other slaves on the bus will wait for a\r\nreset pulse.\r\nSkip ROM [CCh]\r\nThe master can use this command to address all devices\r\non the bus simultaneously without sending out any ROM\r\ncode information. For example, the master can make all\r\nDS18S20s on the bus perform simultaneous temperature\r\nconversions by issuing a Skip ROM command followed by\r\na Convert T [44h] command.\r\nNote that the Read Scratchpad [BEh] command can follow the Skip ROM command only if there is a single slave\r\ndevice on the bus. In this case, time is saved by allowing\r\nthe master to read from the slave without sending the\r\ndevice’s 64-bit ROM code. A Skip ROM command followed\r\nby a Read Scratchpad command will cause a data collision\r\non the bus if there is more than one slave since multiple\r\ndevices will attempt to transmit data simultaneously.\r\nAlarm Search [ECh]\r\nThe operation of this command is identical to the operation\r\nof the Search ROM command except that only slaves with\r\na set alarm flag will respond. This command allows the\r\nmaster device to determine if any DS18S20s experienced\r\nan alarm condition during the most recent temperature\r\nconversion. After every Alarm Search cycle (i.e., Alarm\r\nSearch command followed by data exchange), the bus\r\nmaster must return to Step 1 (Initialization) in the transaction sequence. See the Operation—Alarm Signaling section for an explanation of alarm flag operation.\r\nDS18S20 Function Commands\r\nAfter the bus master has used a ROM command to\r\naddress the DS18S20 with which it wishes to communicate, the master can issue one of the DS18S20 function\r\ncommands. These commands allow the master to write\r\nto and read from the DS18S20’s scratchpad memory,\r\ninitiate temperature conversions and determine the power\r\nsupply mode. The DS18S20 function commands, which\r\nare described below, are summarized in Table 2 and illustrated by the flowchart in Figure 17.\r\nTable 2. DS18S20 Function Command Set\r\nCOMMAND DESCRIPTION PROTOCOL 1-Wire BUS ACTIVITY AFTER\r\nCOMMAND IS ISSUED NOTES\r\nTEMPERATURE CONVERSION COMMANDS\r\nConvert T Initiates temperature\r\nconversion. 44h\r\nDS18S20 transmits conversion status\r\nto master (not applicable for parasitepowered DS18S20s).\r\n1\r\nMEMORY COMMANDS\r\nRead Scratchpad Reads the entire scratchpad\r\nincluding the CRC byte. BEh DS18S20 transmits up to 9 data\r\nbytes to master. 2\r\nWrite Scratchpad Writes data into scratchpad\r\nbytes 2 and 3 (TH and TL). 4Eh Master transmits 2 data bytes to\r\nDS18S20. 3\r\nCopy Scratchpad Copies TH and TL data from the\r\nscratchpad to EEPROM. 48h None 1\r\nRecall E2 Recalls TH and TL data from\r\nEEPROM to the scratchpad. B8h DS18S20 transmits recall status to\r\nmaster.\r\nRead Power\r\nSupply\r\nSignals DS18S20 power supply\r\nmode to the master. B4h DS18S20 transmits supply status to\r\nmaster.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 11\r\nConvert T [44h]\r\nThis command initiates a single temperature conversion.\r\nFollowing the conversion, the resulting thermal data is\r\nstored in the 2-byte temperature register in the scratchpad memory and the DS18S20 returns to its low-power\r\nidle state. If the device is being used in parasite power\r\nmode, within 10µs (max) after this command is issued the\r\nmaster must enable a strong pullup on the 1-Wire bus for\r\nthe duration of the conversion (tCONV) as described in the\r\nPowering The DS18S20 section. If the DS18S20 is powered by an external supply, the master can issue readtime slots after the Convert T command and the DS18S20\r\nwill respond by transmitting 0 while the temperature conversion is in progress and 1 when the conversion is done.\r\nIn parasite power mode this notification technique cannot\r\nbe used since the bus is pulled high by the strong pullup\r\nduring the conversion.\r\nWrite Scratchpad [4Eh]\r\nThis command allows the master to write 2 bytes of data\r\nto the DS18S20’s scratchpad. The first byte is written into\r\nthe TH register (byte 2 of the scratchpad), and the second\r\nbyte is written into the TL register (byte 3 of the scratchpad). Data must be transmitted least significant bit first.\r\nBoth bytes MUST be written before the master issues a\r\nreset, or the data may be corrupted.\r\nRead Scratchpad [BEh]\r\nThis command allows the master to read the contents of\r\nthe scratchpad. The data transfer starts with the least significant bit of byte 0 and continues through the scratchpad\r\nuntil the 9th byte (byte 8 – CRC) is read. The master may\r\nissue a reset to terminate reading at any time if only part\r\nof the scratchpad data is needed.\r\nCopy Scratchpad [48h]\r\nThis command copies the contents of the scratchpad TH\r\nand TL registers (bytes 2 and 3) to EEPROM. If the device\r\nis being used in parasite power mode, within 10µs (max)\r\nafter this command is issued the master must enable\r\na strong pullup on the 1-Wire bus for at least 10ms as\r\ndescribed in the Powering The DS18S20 section.\r\nRecall E2 [B8h]\r\nThis command recalls the alarm trigger values (TH and\r\nTL) from EEPROM and places the data in bytes 2 and\r\n3, respectively, in the scratchpad memory. The master\r\ndevice can issue read-time slots following the Recall E2\r\ncommand and the DS18S20 will indicate the status of the\r\nrecall by transmitting 0 while the recall is in progress and\r\n1 when the recall is done. The recall operation happens\r\nautomatically at power-up, so valid data is available in\r\nthe scratchpad as soon as power is applied to the device.\r\nRead Power Supply [B4h]\r\nThe master device issues this command followed by a\r\nread-time slot to determine if any DS18S20s on the bus\r\nare using parasite power. During the read-time slot, parasite powered DS18S20s will pull the bus low, and externally powered DS18S20s will let the bus remain high. See\r\nthe Powering The DS18S20 section for usage information\r\nfor this command.\r\n1-Wire Signaling\r\nThe DS18S20 uses a strict 1-Wire communication protocol to ensure data integrity. Several signal types are\r\ndefined by this protocol: reset pulse, presence pulse,\r\nwrite 0, write 1, read 0, and read 1. All these signals, with\r\nthe exception of the presence pulse, are initiated by the\r\nbus master.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 12\r\nInitialization Procedure—Reset And\r\nPresence Pulses\r\nAll communication with the DS18S20 begins with an initialization sequence that consists of a reset pulse from the\r\nmaster followed by a presence pulse from the DS18S20.\r\nThis is illustrated in Figure 12. When the DS18S20 sends\r\nthe presence pulse in response to the reset, it is indicating\r\nto the master that it is on the bus and ready to operate.\r\nDuring the initialization sequence the bus master transmits (Tx) the reset pulse by pulling the 1-Wire bus low\r\nfor a minimum of 480µs. The bus master then releases\r\nthe bus and goes into receive mode (Rx). When the bus\r\nis released, the 5k? pullup resistor pulls the 1-Wire bus\r\nhigh. When the DS18S20 detects this rising edge, it waits\r\n15µs to 60µs and then transmits a presence pulse by pulling the 1-Wire bus low for 60µs to 240µs.\r\nRead/Write Time Slots\r\nThe bus master writes data to the DS18S20 during write\r\ntime slots and reads data from the DS18S20 during readtime slots. One bit of data is transmitted over the 1-Wire\r\nbus per time slot.\r\nWrite Time Slots\r\nThere are two types of write time slots: “Write 1” time slots\r\nand “Write 0” time slots. The bus master uses a Write 1\r\ntime slot to write a logic 1 to the DS18S20 and a Write\r\n0 time slot to write a logic 0 to the DS18S20. All write\r\ntime slots must be a minimum of 60µs in duration with a\r\nminimum of a 1µs recovery time between individual write\r\nslots. Both types of write time slots are initiated by the\r\nmaster pulling the 1-Wire bus low (see Figure 13).\r\nTo generate a Write 1 time slot, after pulling the 1-Wire\r\nbus low, the bus master must release the 1-Wire bus\r\nwithin 15µs. When the bus is released, the 5k? pullup\r\nresistor will pull the bus high. To generate a Write 0 time\r\nslot, after pulling the 1-Wire bus low, the bus master must\r\ncontinue to hold the bus low for the duration of the time\r\nslot (at least 60µs). The DS18S20 samples the 1-Wire\r\nbus during a window that lasts from 15µs to 60µs after the\r\nmaster initiates the write time slot. If the bus is high during\r\nthe sampling window, a 1 is written to the DS18S20. If the\r\nline is low, a 0 is written to the DS18S20.\r\nFigure 12. Initialization Timing\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\nDS18S20 PULLING LOW\r\nRESISTOR PULLUP\r\nGND\r\n1-Wire BUS\r\nDS18S20\r\nWAITS 15-60µs\r\nDS18S20 Tx\r\nPRESENCE PULSE\r\n60-240µs\r\nMASTER Rx\r\n480µs MINIMUM\r\nMASTER Tx RESET PULSE\r\n480µs MINIMUM\r\nVPU\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 13\r\nFigure 13. Read/Write Time Slot Timing Diagram\r\nVPU\r\nGND\r\n1-Wire BUS\r\n1µs < TREC < ?\r\nMIN\r\n> 1µs\r\nMASTER WRITE “0” SLOT MASTER WRITE “1” SLOT\r\nMASTER READ “0” SLOT MASTER READ “1” SLOT\r\nMASTER SAMPLES MASTER SAMPLES\r\nSTART\r\nOF SLOT\r\nSTART\r\nOF SLOT\r\nDS18S20 SAMPLES\r\n> 1µs\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\n60µs < Tx “0” < 120µs\r\nTYP MAX\r\n15µS 15µS 30µS 15µS 15µS 30µS\r\nMIN TYP MAX\r\nDS18S20 SAMPLES\r\n1µs < TREC < ?\r\nVPU\r\nGND\r\n1-Wire BUS\r\n15µs 45µs\r\n> 1µs\r\n15µs\r\nRESISTOR PULLUP\r\nDS18S20 PULLING LOW\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 14\r\nRead-Time Slots\r\nThe DS18S20 can only transmit data to the master when\r\nthe master issues read-time slots. Therefore, the master\r\nmust generate read-time slots immediately after issuing\r\na Read Scratchpad [BEh] or Read Power Supply [B4h]\r\ncommand, so that the DS18S20 can provide the requested data. In addition, the master can generate read-time\r\nslots after issuing Convert T [44h] or Recall E2 [B8h] commands to find out the status of the operation as explained\r\nin the DS18S20 Function Commands section.\r\nAll read-time slots must be a minimum of 60µs in duration\r\nwith a minimum of a 1µs recovery time between slots. A\r\nread-time slot is initiated by the master device pulling the\r\n1-Wire bus low for a minimum of 1µs and then releasing\r\nthe bus (see Figure 13). After the master initiates the\r\nread-time slot, the DS18S20 will begin transmitting a 1\r\nor 0 on bus. The DS18S20 transmits a 1 by leaving the\r\nbus high and transmits a 0 by pulling the bus low. When\r\ntransmitting a 0, the DS18S20 will release the bus by the\r\nend of the time slot, and the bus will be pulled back to\r\nits high idle state by the pullup resister. Output data from\r\nthe DS18S20 is valid for 15µs after the falling edge that\r\ninitiated the read-time slot. Therefore, the master must\r\nrelease the bus and then sample the bus state within\r\n15µs from the start of the slot.\r\nFigure 14 illustrates that the sum of TINIT, TRC, and\r\nTSAMPLE must be less than 15µs for a read-time slot.\r\nFigure 15 shows that system timing margin is maximized\r\nby keeping TINIT and TRC as short as possible and by\r\nlocating the master sample time during read-time slots\r\ntowards the end of the 15µs period.\r\nFigure 14. Detailed Master Read 1 Timing\r\nFigure 15. Recommended Master Read 1 Timing\r\nVPU\r\nGND\r\n1-Wire BUS\r\nMASTER SAMPLES\r\nVIH OF MASTER\r\nTINT > 1µs TRC\r\n15µs\r\nLINE TYPE LEGEND\r\nBUS MASTER PULLING LOW\r\nRESISTOR PULLUP\r\nVPU\r\nGND\r\n1-Wire BUS\r\nVIH OF MASTER\r\nTRC =\r\nSMALL\r\nMASTER SAMPLES TINT =\r\nSMALL\r\n15µs\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 15\r\nFigure 16. ROM Commands Flowchart\r\nCCh\r\nSKIP ROM\r\nCOMMAND\r\nMASTER Tx RESET PULSE\r\nDS18S20 Tx PRESENCE PULSE\r\nMASTER Tx ROM COMMAND\r\n33h\r\nREAD ROM\r\nCOMMAND\r\n55h\r\nMATCH ROM\r\nCOMMAND\r\nF0h\r\nSEARCH ROM\r\nCOMMAND\r\nECh\r\nALARM SEARCH\r\nCOMMAND\r\nMASTER Tx\r\nBIT 0\r\nDS18S20 Tx BIT 0\r\nDS18S20 Tx BIT 0\r\nMASTER Tx BIT 0\r\nBIT 0\r\nMATCH?\r\nMASTER Tx\r\nBIT 1\r\nBIT 1\r\nMATCH?\r\nBIT 63\r\nMATCH?\r\nMASTER Tx\r\nBIT 63\r\nN\r\nY Y Y\r\nN\r\nN\r\nY\r\nY\r\nY\r\nDS18S20 Tx BIT 1\r\nMASTER Tx BIT 1\r\nDS18S20 T BIT 63\r\nDS18S20 Tx BIT 63\r\nMASTER Tx BIT 63\r\nBIT 0\r\nMATCH?\r\nBIT 1\r\nMATCH?\r\nBIT 63\r\nMATCH?\r\nN\r\nY\r\nDS18S20 Tx\r\nFAMILY CODE\r\n1 BYTE\r\nDS18S20 Tx\r\nSERIAL NUMBER\r\n6 BYTES\r\nDS18S20 Tx\r\nCRC BYTE\r\nDS18S20 Tx BIT 0\r\nDS18S20 Tx BIT 0\r\nMASTER Tx BIT 0\r\nDEVICE(S)\r\nWITH ALARM\r\nFLAG SET?\r\nINITIALIZATION\r\nSEQUENCE\r\nMASTER Tx FUNCTION\r\nCOMMAND (FIGURE 17)\r\nN\r\nY\r\nN N\r\nY Y\r\nN\r\nY\r\nN N N\r\nY\r\nN\r\nDS18S20 Tx BIT 1\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 16\r\nFigure 17. DS18S20 Function Commands Flowchart\r\nMASTER Tx\r\nFUNCTION\r\nCOMMAND\r\nY\r\nN\r\n44h\r\nCONVERT\r\nTEMPERATURE\r\n?\r\nDS18S20 BEGINS\r\nCONVERSION\r\nDEVICE\r\nCONVERTING\r\nTEMPERATURE\r\n?\r\nN\r\nY\r\nMASTER\r\nRx “0s”\r\nMASTER\r\nRx “1s”\r\nMASTER ENABLES\r\nSTRONG PULLUP ON DQ\r\nDS18S20 CONVERTS\r\nTEMPERATURE\r\nMASTER DISABLES\r\nSTRONG PULLUP\r\nY\r\nN\r\n48h\r\nCOPY\r\nSCRATCHPAD\r\n?\r\nPARASITE\r\nPOWER\r\n?\r\nN\r\nMASTER ENABLES\r\nSTRONG PULL- UP ON DQ\r\nDATA COPIED FROM\r\nSCRATCHPAD TO EEPROM\r\nMASTER DISABLES\r\nSTRONG PULLUP\r\nMASTER\r\nRx “0s”\r\nCOPY IN\r\nPROGRESS\r\n?\r\nY\r\nMASTER\r\nRx “1s”\r\nRETURN TO INITIALIZATION SEQUENCE\r\n(FIGURE 16) FOR NEXT TRANSACTION\r\nB4h READ\r\nPOWER SUPPLY\r\n?\r\nY\r\nN\r\nPARASITE\r\nPOWERED\r\n?\r\nMASTER\r\nRx “1s”\r\nMASTER\r\nRx “0s”\r\nMASTER Tx TH BYTE\r\nTO SCRATCHPAD\r\nY\r\n4Eh\r\nWRITE\r\nSCRATCHPAD\r\n?\r\nMASTER Tx TL BYTE\r\nTO SCRATCHPAD\r\nY\r\nN\r\nY\r\nBEh\r\nREAD\r\nSCRATCH PAD\r\n?\r\nHAVE 8 BYTES\r\nBEEN READ\r\n?\r\nN\r\nMASTER\r\nTx RESET\r\n?\r\nMASTER Rx DATA BYTE\r\nFROM SCRATCHPAD\r\nN\r\nY\r\nMASTER Rx SCRATCHPAD\r\nCRC BYTE\r\nMASTER\r\nRx “1s”\r\nY\r\nN B8h\r\nRECALL E2\r\n?\r\nMASTER BEGINS DATA\r\nRECALL FROM E2 PROM\r\nDEVICE\r\nBUSY RECALLING\r\nDATA\r\n?\r\nN\r\nY\r\nMASTER\r\nRx “0s”\r\nPARASITE\r\nPOWER\r\n?\r\nY Y\r\nN\r\nN Y\r\nN\r\nN\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 17\r\nDs18S20 Operation Example 1\r\nIn this example there are multiple DS18S20s on the bus and they are using parasite power. The bus master initiates a\r\ntemperature conversion in a specific DS18S20 and then reads its scratchpad and recalculates the CRC to verify the data.\r\nDS18S20 Operation Example 2\r\nIn this example there is only one DS18S20 on the bus and it is using parasite power. The master writes to the TH and\r\nTL registers in the DS18S20 scratchpad and then reads the scratchpad and recalculates the CRC to verify the data. The\r\nmaster then copies the scratchpad contents to EEPROM.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20s respond with presence pulse.\r\nTx 55h Master issues Match ROM command.\r\nTx 64-bit ROM code Master sends DS18S20 ROM code.\r\nTx 44h Master issues Convert T command.\r\nTx DQ line held high by\r\nstrong pullup\r\nMaster applies strong pullup to DQ for the duration of the\r\nconversion (tCONV).\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20s respond with presence pulse.\r\nTx 55h Master issues Match ROM command.\r\nTx 64-bit ROM code Master sends DS18S20 ROM code.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then\r\nrecalculates the CRC of the first eight data bytes from the scratchpad\r\nand compares the calculated CRC with the read CRC (byte 9). If they\r\nmatch, the master continues; if not, the read operation is repeated.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 4Eh Master issues Write Scratchpad command.\r\nTx 2 data bytes Master sends two data bytes to scratchpad (TH and TL)\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then\r\nrecalculates the CRC of the first eight data bytes from the scratchpad\r\nand compares the calculated CRC with the read CRC (byte 9). If they\r\nmatch, the master continues; if not, the read operation is repeated.\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 48h Master issues Copy Scratchpad command.\r\nTx DQ line held high by\r\nstrong pullup\r\nMaster applies strong pullup to DQ for at least 10ms while copy\r\noperation is in progress.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 18\r\nDS18S20 Operation Example 3\r\nIn this example there is only one DS18S20 on the bus and it is using parasite power. The bus master initiates a temperature conversion then reads the DS18S20 scratchpad and calculates a higher resolution result using the data from the\r\ntemperature, COUNT REMAIN and COUNT PER °C registers.\r\nMASTER MODE DATA (LSB FIRST) COMMENTS\r\nTx Reset Master issues reset pulse.\r\nTx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx 44h Master issues Convert T command.\r\nTx DQ line held high by\r\nstrong pullup Master applies strong pullup to DQ for the duration of the conversion (tCONV).\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\nTx CCh Master issues Skip ROM command.\r\nTx BEh Master issues Read Scratchpad command.\r\nRx 9 data bytes\r\nMaster reads entire scratchpad including CRC. The master then recalculates\r\nthe CRC of the first eight data bytes from the scratchpad and compares\r\nthe calculated CRC with the read CRC (byte 9). If they match, the master\r\ncontinues; if not, the read operation is repeated. The master also calculates\r\nthe TEMP_READ value and stores the contents of the COUNT REMAIN and\r\nCount Per °C registers.\r\nTx Reset Master issues reset pulse.\r\nRx Presence DS18S20 responds with presence pulse.\r\n— — CPU calculates extended resolution temperature using the equation in\r\nthe Operation—Measuring Temperature section.\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 19\r\n+Denotes a lead(Pb)-free/RoHS-compliant package. A “+”\r\nappears on the top mark of lead(Pb)-free packages.\r\nT&R = Tape and reel.\r\n*TO-92 packages in tape and reel can be ordered with straight\r\nor formed leads. Choose “SL” for straight leads. Bulk TO-92\r\norders are straight leads only.\r\nPART TEMP RANGE PIN-PACKAGE\r\nDS18S20+ –55°C to +125°C 3 TO-92\r\nDS18S20+T&R –55°C to +125°C 3 TO-92 (2000 Piece)\r\nDS18S20-SL+T&R –55°C to +125°C 3 TO-92 (2000 Piece)*\r\nDS18S20Z –55°C to +125°C 8 SO\r\nDS18S20Z+ –55°C to +125°C 8 SO\r\nDS18S20Z/T&R –55°C to +125°C 8 SO (2500 Piece)\r\nDS18S20Z+T&R –55°C to +125°C 8 SO (2500 Piece)\r\nPACKAGE\r\nTYPE\r\nPACKAGE\r\nCODE\r\nOUTLINE\r\nNO.\r\nLAND\r\nPATTERN NO.\r\n8 SO S8-2 21-0041 90-0096\r\n3 TO-92\r\n(straight leads) Q3-1 21-0248 —\r\n3 TO-92\r\n(formed leads) Q3-4 21-0250 —\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nwww.maximintegrated.com Maxim Integrated ? 20\r\nOrdering Information Package Information\r\nFor the latest package outline information and land patterns\r\n(footprints), go to www.maximintegrated.com/packages. Note\r\nthat a “+”, “#”, or “-” in the package code indicates RoHS status\r\nonly. Package drawings may show a different suffix character, but\r\nthe drawing pertains to the package regardless of RoHS status.\r\nREVISION\r\nNUMBER\r\nREVISION\r\nDATE DESCRIPTION PAGES\r\nCHANGED\r\n0 4/08\r\nIn the Ordering Information table, added TO-92 straight-lead packages and\r\nincluded a note that the TO-92 package in tape and reel can be ordered with either\r\nformed or straight leads\r\n2\r\n1 8/10\r\nRemoved the Top Mark column from the Ordering Information table; added the\r\ncontinuous power dissipation and lead and soldering temperatures to the Absolute\r\nMaximum Ratings section\r\n2, 20\r\n2 1/15 Updated General Description and Benefits and Features section and added\r\nApplications section 1\r\n3 4/15 Revised Pin Configuration and Ordering Information 1, 20\r\nMaxim Integrated cannot assume responsibility for use of any circuitry other than circuitry entirely embodied in a Maxim Integrated product. No circuit patent licenses\r\nare implied. Maxim Integrated reserves the right to change the circuitry and specifications without notice at any time. The parametric values (min and max limits)\r\nshown in the Electrical Characteristics table are guaranteed. Other parametric values quoted in this data sheet are provided for guidance.\r\nMaxim Integrated and the Maxim Integrated logo are trademarks of Maxim Integrated Products, Inc. © 2015 Maxim Integrated Products, Inc. ? 21\r\nDS18S20 High-Precision 1-Wire Digital Thermometer\r\nRevision History\r\nFor pricing, delivery, and ordering information, please contact Maxim Direct at 1-888-629-4642, or visit Maxim Integrated’s website at www.maximintegrated.com.', 'Capteur infrarouge', 5, 789456);

-- --------------------------------------------------------

--
-- Structure de la table `categorie`
--

CREATE TABLE `categorie` (
  `idCategorie` int(10) UNSIGNED NOT NULL,
  `categorie` varchar(200) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Structure de la table `cemac`
--

CREATE TABLE `cemac` (
  `idCemac` int(11) NOT NULL,
  `numeroSerie` int(11) DEFAULT NULL,
  `idPiece` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `cemac`
--

INSERT INTO `cemac` (`idCemac`, `numeroSerie`, `idPiece`) VALUES
(1, 50, 1),
(2, 51, 2);

-- --------------------------------------------------------

--
-- Structure de la table `composant`
--

CREATE TABLE `composant` (
  `idComposant` int(11) NOT NULL,
  `etatComposant` tinyint(1) DEFAULT '0',
  `numComposant` int(11) DEFAULT NULL,
  `idCemac` int(11) DEFAULT NULL,
  `idCatalogue` int(11) DEFAULT NULL,
  `idTypeCapteur` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `composant`
--

INSERT INTO `composant` (`idComposant`, `etatComposant`, `numComposant`, `idCemac`, `idCatalogue`, `idTypeCapteur`) VALUES
(0, 1, 10, 1, 2, 1),
(1, 0, 1, 2, 3, 2),
(2, 1, 11, 2, 1, 0),
(9, 0, 51, 1, 1, 0);

-- --------------------------------------------------------

--
-- Structure de la table `controlechauffage`
--

CREATE TABLE `controlechauffage` (
  `idUser` int(11) NOT NULL,
  `idChauffage` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Structure de la table `messagerie`
--

CREATE TABLE `messagerie` (
  `idMessage` int(11) NOT NULL,
  `idTicket` int(11) NOT NULL,
  `subject` varchar(50) DEFAULT NULL,
  `contenu` longtext NOT NULL,
  `emailUser` varchar(50) NOT NULL,
  `idUser` int(11) DEFAULT NULL,
  `diem` varchar(255) NOT NULL,
  `tempus` int(11) NOT NULL,
  `ouvert` int(11) NOT NULL,
  `reply` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `messagerie`
--

INSERT INTO `messagerie` (`idMessage`, `idTicket`, `subject`, `contenu`, `emailUser`, `idUser`, `diem`, `tempus`, `ouvert`, `reply`) VALUES
(3, 0, 'problème de capteur de luminosité', 'Bonjour,\r\n\r\nMon capteur de luminosité ne marche pas très bien.\r\nJ\'ai des valeurs abérantes...\r\n\r\nCordialement, Victor.', 'victor.martin@isep.fr', 4, '', 0, 1, 1),
(4, 1, 'ghjkl', 'ghjkl', 'victor.martin@isep.fr', 4, '', 0, 1, 1),
(5, 2, 'problème capteur 2', 'Bonjour,\r\nJ\'ai un problème avec le capteur 2\r\n\r\nCordialement, Victor.', 'victor.martin@isep.fr', 4, '', 0, 1, 1),
(6, 2, 'probleme capteur 2', 'Bonjour Victor,\r\n\r\nEssayez de débrancher la carte et de la rebrancher.\r\nLa réinitialisation du capteur est peut-être nécessaire.\r\n\r\nCordialement, le support.', 'quiescisteam@gmail.com', 4, '', 0, 1, 1),
(7, 5, 'problème moteur', 'Bonjour j\'ai un problème de moteur\r\n\r\nCordialement,', 'victor.martin@isep.fr', 5, '', 0, 1, 1);

-- --------------------------------------------------------

--
-- Structure de la table `parametre_du_site`
--

CREATE TABLE `parametre_du_site` (
  `idParametre` int(10) UNSIGNED NOT NULL,
  `nom` varchar(50) NOT NULL,
  `valeur` text NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Structure de la table `piece`
--

CREATE TABLE `piece` (
  `idPiece` int(11) NOT NULL,
  `nom` varchar(50) DEFAULT NULL,
  `idAppart` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `piece`
--

INSERT INTO `piece` (`idPiece`, `nom`, `idAppart`) VALUES
(1, 'Cuisine', 1),
(2, 'Chambre', 2),
(3, 'Chambre', 1),
(4, 'Salle de bain', 3),
(5, 'Salle de sport', 3),
(6, 'Salon', 1),
(7, 'Cuisine', 2);

-- --------------------------------------------------------

--
-- Structure de la table `role`
--

CREATE TABLE `role` (
  `idRole` int(11) NOT NULL,
  `principal` tinyint(1) DEFAULT '1',
  `secondaire` tinyint(1) DEFAULT '0',
  `idAppart` int(11) DEFAULT NULL,
  `idUser` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `role`
--

INSERT INTO `role` (`idRole`, `principal`, `secondaire`, `idAppart`, `idUser`) VALUES
(29, 1, 0, 1, 4),
(30, 1, 0, 2, 4),
(31, 1, 0, 3, 5),
(32, 1, 0, 4, 5);

-- --------------------------------------------------------

--
-- Structure de la table `systeme_chauffage`
--

CREATE TABLE `systeme_chauffage` (
  `idChauffage` int(10) UNSIGNED NOT NULL,
  `tempMaxGestionnaire` int(10) UNSIGNED NOT NULL,
  `tempMaxUtilisateur` int(10) UNSIGNED NOT NULL,
  `droitActivation` tinyint(1) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `systeme_chauffage`
--

INSERT INTO `systeme_chauffage` (`idChauffage`, `tempMaxGestionnaire`, `tempMaxUtilisateur`, `droitActivation`) VALUES
(1, 20, 17, NULL);

-- --------------------------------------------------------

--
-- Structure de la table `trameenvoi`
--

CREATE TABLE `trameenvoi` (
  `idEnvoi` int(11) NOT NULL,
  `val` int(11) DEFAULT NULL,
  `tim` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `req` varchar(50) DEFAULT NULL,
  `num` int(11) DEFAULT NULL,
  `chk` varchar(20) DEFAULT NULL,
  `idComposant` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `trameenvoi`
--

INSERT INTO `trameenvoi` (`idEnvoi`, `val`, `tim`, `req`, `num`, `chk`, `idComposant`) VALUES
(6, 20, '2019-05-21 12:57:30', NULL, NULL, NULL, 0),
(7, 50, '2019-05-21 12:57:30', NULL, NULL, NULL, 9),
(8, 22, '2019-05-21 12:58:00', NULL, NULL, NULL, 0),
(90, 70, '2019-05-21 20:58:00', NULL, NULL, NULL, 9),
(91, 15, '2019-05-22 20:58:22', NULL, NULL, NULL, 0),
(92, 50, '2019-05-22 12:58:22', NULL, NULL, NULL, 9);

-- --------------------------------------------------------

--
-- Structure de la table `trameretour`
--

CREATE TABLE `trameretour` (
  `idRetour` int(11) NOT NULL,
  `ans` int(11) DEFAULT NULL,
  `req` varchar(50) DEFAULT NULL,
  `num` int(11) DEFAULT NULL,
  `chk` varchar(20) DEFAULT NULL,
  `idComposant` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `trameretour`
--

INSERT INTO `trameretour` (`idRetour`, `ans`, `req`, `num`, `chk`, `idComposant`) VALUES
(1, 30, NULL, 1, NULL, 0),
(2, 30, NULL, 1, NULL, 0),
(3, 31, NULL, 1, NULL, 0),
(4, 31, NULL, 1, NULL, 0),
(5, 31, NULL, 1, NULL, 0),
(6, 31, NULL, 1, NULL, 0),
(7, 31, NULL, 1, NULL, 0),
(8, 31, NULL, 1, NULL, 0),
(9, 31, NULL, 1, NULL, 0),
(10, 31, NULL, 1, NULL, 0),
(11, 30, NULL, 1, NULL, 0),
(12, 32, NULL, 12, NULL, 3),
(13, 30, NULL, 12, NULL, 3);

-- --------------------------------------------------------

--
-- Structure de la table `typecapteur`
--

CREATE TABLE `typecapteur` (
  `idTypeCapteur` int(11) NOT NULL,
  `nom` varchar(50) DEFAULT NULL,
  `valeur` varchar(10) DEFAULT NULL,
  `grandeurPhysique` varchar(10) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `typecapteur`
--

INSERT INTO `typecapteur` (`idTypeCapteur`, `nom`, `valeur`, `grandeurPhysique`) VALUES
(0, 'capteur luminosite', 'a1', 'lux'),
(1, 'capteur temperature', 'b2', '°C'),
(2, 'capteur infrarouge', 'd4', NULL);

-- --------------------------------------------------------

--
-- Structure de la table `type_utilisateur`
--

CREATE TABLE `type_utilisateur` (
  `idType` int(10) UNSIGNED NOT NULL,
  `type` varchar(50) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `type_utilisateur`
--

INSERT INTO `type_utilisateur` (`idType`, `type`) VALUES
(1, 'Utilisateur'),
(0, 'Admin'),
(2, 'Gestionnaire'),
(3, 'Gestionnaire Stock');

-- --------------------------------------------------------

--
-- Structure de la table `utilisateurs`
--

CREATE TABLE `utilisateurs` (
  `idUtilisateur` int(11) NOT NULL,
  `idSession` int(11) DEFAULT NULL,
  `tokenCookie` varchar(100) DEFAULT NULL,
  `passwordHash` varchar(60) DEFAULT NULL,
  `nom` varchar(50) DEFAULT NULL,
  `prenom` varchar(50) DEFAULT NULL,
  `email` varchar(50) DEFAULT NULL,
  `role` varchar(20) DEFAULT NULL,
  `emailActive` tinyint(1) DEFAULT NULL,
  `emailToken` varchar(50) DEFAULT NULL,
  `derniereVerificationEmail` int(11) DEFAULT NULL,
  `emailTemporaire` varchar(50) DEFAULT NULL,
  `tokenEmailTemporaire` varchar(50) DEFAULT NULL,
  `photoProfil` varchar(100) DEFAULT NULL,
  `idType` int(11) DEFAULT NULL,
  `hashCookie` varchar(60) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Déchargement des données de la table `utilisateurs`
--

INSERT INTO `utilisateurs` (`idUtilisateur`, `idSession`, `tokenCookie`, `passwordHash`, `nom`, `prenom`, `email`, `role`, `emailActive`, `emailToken`, `derniereVerificationEmail`, `emailTemporaire`, `tokenEmailTemporaire`, `photoProfil`, `idType`, `hashCookie`) VALUES
(4, NULL, NULL, '$2y$10$v0aNflak7foc76XsQEpC0uswrApfpdj7N5xUNGc16I8xHV4mzY7eC', 'Test', 'test', 'victor.martin@isep.fr', 'user', 1, '54ac0121c2cff95dae7d09b994ddf3710ed60c74', NULL, NULL, NULL, NULL, 1, '$2y$10$8kG18koV8GSaUvXzNSiNFe0vZ9zqU9OhgX2O/GjDEZoYZh.l.Wv3m'),
(5, NULL, NULL, '$2y$10$1oiK9yakYh5IW/fagNG7n.Kpo7.0j4Vuw6c3yo1mWxOwEKrb/D.xe', 'gab', NULL, 'gabriel.mougard@gmail.com', 'user', 1, '54ac0121c2cff95dae7d09b994ddf3710ed60c74', NULL, NULL, NULL, NULL, 1, NULL),
(8, NULL, NULL, '$2y$10$.C36DEEO5gyjb2sn5UX61.3gKDD3SBrRYjHaiiK30KWWyUO/x1Zua', 'Victor', NULL, 'leon.truc@gmail.com', 'admin', 1, NULL, NULL, NULL, NULL, NULL, 0, '$2y$10$bUiAfGE865tjhozjD285iuCAYmcgn0fO4LTmurAgPKcEfTZVwa8U.');

--
-- Index pour les tables déchargées
--

--
-- Index pour la table `appartement`
--
ALTER TABLE `appartement`
  ADD PRIMARY KEY (`idAppartement`);

--
-- Index pour la table `catalogue`
--
ALTER TABLE `catalogue`
  ADD PRIMARY KEY (`idCatalogue`);

--
-- Index pour la table `categorie`
--
ALTER TABLE `categorie`
  ADD PRIMARY KEY (`idCategorie`);

--
-- Index pour la table `cemac`
--
ALTER TABLE `cemac`
  ADD PRIMARY KEY (`idCemac`);

--
-- Index pour la table `composant`
--
ALTER TABLE `composant`
  ADD PRIMARY KEY (`idComposant`);

--
-- Index pour la table `controlechauffage`
--
ALTER TABLE `controlechauffage`
  ADD PRIMARY KEY (`idUser`);

--
-- Index pour la table `messagerie`
--
ALTER TABLE `messagerie`
  ADD PRIMARY KEY (`idMessage`);

--
-- Index pour la table `parametre_du_site`
--
ALTER TABLE `parametre_du_site`
  ADD PRIMARY KEY (`idParametre`);

--
-- Index pour la table `piece`
--
ALTER TABLE `piece`
  ADD PRIMARY KEY (`idPiece`);

--
-- Index pour la table `role`
--
ALTER TABLE `role`
  ADD PRIMARY KEY (`idRole`);

--
-- Index pour la table `systeme_chauffage`
--
ALTER TABLE `systeme_chauffage`
  ADD PRIMARY KEY (`idChauffage`);

--
-- Index pour la table `trameenvoi`
--
ALTER TABLE `trameenvoi`
  ADD PRIMARY KEY (`idEnvoi`);

--
-- Index pour la table `trameretour`
--
ALTER TABLE `trameretour`
  ADD PRIMARY KEY (`idRetour`);

--
-- Index pour la table `typecapteur`
--
ALTER TABLE `typecapteur`
  ADD PRIMARY KEY (`idTypeCapteur`);

--
-- Index pour la table `type_utilisateur`
--
ALTER TABLE `type_utilisateur`
  ADD PRIMARY KEY (`idType`);

--
-- Index pour la table `utilisateurs`
--
ALTER TABLE `utilisateurs`
  ADD PRIMARY KEY (`idUtilisateur`);

--
-- AUTO_INCREMENT pour les tables déchargées
--

--
-- AUTO_INCREMENT pour la table `appartement`
--
ALTER TABLE `appartement`
  MODIFY `idAppartement` int(10) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2053000754;

--
-- AUTO_INCREMENT pour la table `catalogue`
--
ALTER TABLE `catalogue`
  MODIFY `idCatalogue` int(10) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT pour la table `cemac`
--
ALTER TABLE `cemac`
  MODIFY `idCemac` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT pour la table `composant`
--
ALTER TABLE `composant`
  MODIFY `idComposant` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- AUTO_INCREMENT pour la table `controlechauffage`
--
ALTER TABLE `controlechauffage`
  MODIFY `idUser` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT pour la table `messagerie`
--
ALTER TABLE `messagerie`
  MODIFY `idMessage` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT pour la table `parametre_du_site`
--
ALTER TABLE `parametre_du_site`
  MODIFY `idParametre` int(10) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT pour la table `piece`
--
ALTER TABLE `piece`
  MODIFY `idPiece` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT pour la table `role`
--
ALTER TABLE `role`
  MODIFY `idRole` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=35;

--
-- AUTO_INCREMENT pour la table `systeme_chauffage`
--
ALTER TABLE `systeme_chauffage`
  MODIFY `idChauffage` int(10) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT pour la table `trameenvoi`
--
ALTER TABLE `trameenvoi`
  MODIFY `idEnvoi` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=93;

--
-- AUTO_INCREMENT pour la table `trameretour`
--
ALTER TABLE `trameretour`
  MODIFY `idRetour` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=14;

--
-- AUTO_INCREMENT pour la table `typecapteur`
--
ALTER TABLE `typecapteur`
  MODIFY `idTypeCapteur` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT pour la table `type_utilisateur`
--
ALTER TABLE `type_utilisateur`
  MODIFY `idType` int(10) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT pour la table `utilisateurs`
--
ALTER TABLE `utilisateurs`
  MODIFY `idUtilisateur` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
